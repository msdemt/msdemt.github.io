<!DOCTYPE html>
<html lang="zh-CN">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
        <title>梳理Java IO流 - MyBlog</title><meta name="Description" content="我的博客"><meta property="og:title" content="梳理Java IO流" />
<meta property="og:description" content="参考： https://blog.csdn.net/qq_35598736/article/details/108750468 File File 类主要是对文件和目录的抽象表示，提供了对文件的创建、删除、查找等操作。主要有以下特点 Java 的世界万物皆对象，文件和目录就可抽象为Fi" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://msdemt.github.io/posts/java/%E9%97%AE%E9%A2%98%E6%B1%87%E6%80%BB/%E6%A2%B3%E7%90%86javaio%E6%B5%81/" />
<meta property="og:image" content="https://msdemt.github.io/logo.png"/>
<meta property="article:published_time" content="2021-02-24T09:50:36+08:00" />
<meta property="article:modified_time" content="2021-02-24T09:50:36+08:00" />
<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://msdemt.github.io/logo.png"/>

<meta name="twitter:title" content="梳理Java IO流"/>
<meta name="twitter:description" content="参考： https://blog.csdn.net/qq_35598736/article/details/108750468 File File 类主要是对文件和目录的抽象表示，提供了对文件的创建、删除、查找等操作。主要有以下特点 Java 的世界万物皆对象，文件和目录就可抽象为Fi"/>
<meta name="application-name" content="LoveIt">
<meta name="apple-mobile-web-app-title" content="LoveIt"><meta name="theme-color" content="#ffffff"><meta name="msapplication-TileColor" content="#da532c"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><link rel="manifest" href="/site.webmanifest"><link rel="canonical" href="https://msdemt.github.io/posts/java/%E9%97%AE%E9%A2%98%E6%B1%87%E6%80%BB/%E6%A2%B3%E7%90%86javaio%E6%B5%81/" /><link rel="prev" href="https://msdemt.github.io/posts/java/%E9%97%AE%E9%A2%98%E6%B1%87%E6%80%BB/%E4%B8%87%E5%AD%97%E5%9B%BE%E8%A7%A3java%E5%A4%9A%E7%BA%BF%E7%A8%8B/" /><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/normalize.css@8.0.1/normalize.min.css"><link rel="stylesheet" href="/css/style.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.13.0/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.7.2/animate.min.css"><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "梳理Java IO流",
        "inLanguage": "zh-CN",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https:\/\/msdemt.github.io\/posts\/java\/%E9%97%AE%E9%A2%98%E6%B1%87%E6%80%BB\/%E6%A2%B3%E7%90%86javaio%E6%B5%81\/"
        },"image": ["https:\/\/msdemt.github.io\/images\/Apple-Devices-Preview.png"],"genre": "posts","wordcount":  14921 ,
        "url": "https:\/\/msdemt.github.io\/posts\/java\/%E9%97%AE%E9%A2%98%E6%B1%87%E6%80%BB\/%E6%A2%B3%E7%90%86javaio%E6%B5%81\/","datePublished": "2021-02-24T09:50:36+08:00","dateModified": "2021-02-24T09:50:36+08:00","license": "This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.","publisher": {
            "@type": "Organization",
            "name": "xxxx","logo": "https:\/\/msdemt.github.io\/images\/avatar.png"},"author": {
                "@type": "Person",
                "name": "hekai"
            },"description": ""
    }
    </script></head>
    <body header-desktop="fixed" header-mobile="auto"><script type="text/javascript">(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('auto' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : 'auto' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/" title="MyBlog"><span class="header-title-pre"><i class='far fa-kiss-wink-heart fa-fw'></i></span>MyBlog</a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/posts/"> 所有文章 </a><a class="menu-item" href="/tags/"> 标签 </a><a class="menu-item" href="/categories/"> 分类 </a><a class="menu-item" href="/categories/documentation/"> 文档 </a><a class="menu-item" href="/about/"> 关于 </a><a class="menu-item" href="https://github.com/dillonzq/LoveIt" title="GitHub" rel="noopener noreffer" target="_blank"><i class='fab fa-github fa-fw'></i>  </a><span class="menu-item delimiter"></span><span class="menu-item search" id="search-desktop">
                        <input type="text" placeholder="搜索文章标题或内容..." id="search-input-desktop">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-desktop" title="搜索">
                            <i class="fas fa-search fa-fw"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-desktop" title="清空">
                            <i class="fas fa-times-circle fa-fw"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-desktop">
                            <i class="fas fa-spinner fa-fw fa-spin"></i>
                        </span>
                    </span><a href="javascript:void(0);" class="menu-item theme-switch" title="切换主题">
                    <i class="fas fa-adjust fa-fw"></i>
                </a>
            </div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/" title="MyBlog"><span class="header-title-pre"><i class='far fa-kiss-wink-heart fa-fw'></i></span>MyBlog</a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><div class="search-wrapper">
                    <div class="search mobile" id="search-mobile">
                        <input type="text" placeholder="搜索文章标题或内容..." id="search-input-mobile">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-mobile" title="搜索">
                            <i class="fas fa-search fa-fw"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-mobile" title="清空">
                            <i class="fas fa-times-circle fa-fw"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-mobile">
                            <i class="fas fa-spinner fa-fw fa-spin"></i>
                        </span>
                    </div>
                    <a href="javascript:void(0);" class="search-cancel" id="search-cancel-mobile">
                        取消
                    </a>
                </div><a class="menu-item" href="/posts/" title="">所有文章</a><a class="menu-item" href="/tags/" title="">标签</a><a class="menu-item" href="/categories/" title="">分类</a><a class="menu-item" href="/categories/documentation/" title="">文档</a><a class="menu-item" href="/about/" title="">关于</a><a class="menu-item" href="https://github.com/dillonzq/LoveIt" title="GitHub" rel="noopener noreffer" target="_blank"><i class='fab fa-github fa-fw'></i></a><a href="javascript:void(0);" class="menu-item theme-switch" title="切换主题">
                <i class="fas fa-adjust fa-fw"></i>
            </a></div>
    </div>
</header>
<div class="search-dropdown desktop">
    <div id="search-dropdown-desktop"></div>
</div>
<div class="search-dropdown mobile">
    <div id="search-dropdown-mobile"></div>
</div>
<main class="main">
                <div class="container"><div class="toc" id="toc-auto">
            <h2 class="toc-title">目录</h2>
            <div class="toc-content" id="toc-content-auto"></div>
        </div><article class="page single"><h1 class="single-title animated flipInX">梳理Java IO流</h1><div class="post-meta">
            <div class="post-meta-line"><span class="post-author"><a href="/" title="Author" rel=" author" class="author"><i class="fas fa-user-circle fa-fw"></i>hekai</a></span></div>
            <div class="post-meta-line"><i class="far fa-calendar-alt fa-fw"></i>&nbsp;<time datetime="2021-02-24">2021-02-24</time>&nbsp;<i class="fas fa-pencil-alt fa-fw"></i>&nbsp;约 14921 字&nbsp;
                <i class="far fa-clock fa-fw"></i>&nbsp;预计阅读 30 分钟&nbsp;</div>
        </div><div class="details toc" id="toc-static"  kept="">
                <div class="details-summary toc-title">
                    <span>目录</span>
                    <span><i class="details-icon fas fa-angle-right"></i></span>
                </div>
                <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li><a href="#file">File</a>
      <ul>
        <li><a href="#file-类的常用构造方法">File 类的常用构造方法</a></li>
        <li><a href="#绝对路径和相对路径">绝对路径和相对路径</a></li>
        <li><a href="#路径分隔符和换行符">路径分隔符和换行符</a></li>
        <li><a href="#file-的常用方法">File 的常用方法</a>
          <ul>
            <li><a href="#创建删除">创建、删除</a></li>
            <li><a href="#文件检测">文件检测</a></li>
            <li><a href="#文件获取">文件获取</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#io-流">IO 流</a>
      <ul>
        <li><a href="#io-的分类">IO 的分类</a></li>
        <li><a href="#字节流和字符流">字节流和字符流</a>
          <ul>
            <li><a href="#字节流">字节流</a>
              <ul>
                <li><a href="#文件节点流">文件节点流</a></li>
                <li><a href="#内存节点流">内存节点流</a></li>
              </ul>
            </li>
            <li><a href="#字符流">字符流</a>
              <ul>
                <li><a href="#文件节点流-1">文件节点流</a></li>
                <li><a href="#内存字节流">内存字节流</a></li>
              </ul>
            </li>
            <li><a href="#字节流和字符流的共同点">字节流和字符流的共同点</a></li>
          </ul>
        </li>
        <li><a href="#处理流">处理流</a>
          <ul>
            <li><a href="#缓冲流重点">缓冲流（重点）</a>
              <ul>
                <li><a href="#字节缓冲流">字节缓冲流</a></li>
                <li><a href="#字符缓冲流">字符缓冲流</a></li>
              </ul>
            </li>
            <li><a href="#转换流">转换流</a>
              <ul>
                <li><a href="#字符编码和字符集">字符编码和字符集</a></li>
                <li><a href="#inputstreamreader">InputStreamReader</a></li>
                <li><a href="#outputstreamwriter">OutputStreamWriter</a></li>
              </ul>
            </li>
            <li><a href="#对象流">对象流</a>
              <ul>
                <li><a href="#序列化">序列化</a></li>
                <li><a href="#objectoutputstream">ObjectOutputStream</a></li>
                <li><a href="#objectinputstream">ObjectInputStream</a></li>
                <li><a href="#对象与字节数组的转换">对象与字节数组的转换</a></li>
              </ul>
            </li>
            <li><a href="#管道流">管道流</a></li>
            <li><a href="#输入流与输出流">输入流与输出流</a></li>
            <li><a href="#数据流">数据流</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#io-流总结">IO 流总结</a></li>
  </ul>
</nav></div>
            </div><div class="content" id="content"><blockquote>
<p>参考：<br>
<a href="https://blog.csdn.net/qq_35598736/article/details/108750468">https://blog.csdn.net/qq_35598736/article/details/108750468</a></p>
</blockquote>
<h2 id="file">File</h2>
<p>File 类主要是对文件和目录的抽象表示，提供了对文件的创建、删除、查找等操作。主要有以下特点</p>
<ul>
<li>Java 的世界万物皆对象，文件和目录就可抽象为File对象</li>
<li>对于File而言，封装的并不是真正的文件，封装的仅仅是一个路径名，磁盘文件本身可以存在，也可以不存在</li>
<li>文件的内容不能用File读取，而是通过流来读取，File对象可以作为流的来源地和目的地</li>
</ul>
<h3 id="file-类的常用构造方法">File 类的常用构造方法</h3>
<table>
<thead>
<tr>
<th>构造方法</th>
<th>方法说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>File(String pathname)</td>
<td>将路径字符串抽象为File实例，路径字符串可以是相对路径，也可以为绝对路径</td>
</tr>
<tr>
<td>File(String parent, String child)</td>
<td>从父路径名和子路径名来构建File实例</td>
</tr>
<tr>
<td>File(File parent, String child)</td>
<td>根据父File实例和子路径名来构建File实例</td>
</tr>
</tbody>
</table>
<p>如下示例，表示这几种文件和目录的代码如下</p>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/images/20210224-File-1.png"
        data-srcset="/images/20210224-File-1.png, /images/20210224-File-1.png 1.5x, /images/20210224-File-1.png 2x"
        data-sizes="auto"
        alt="/images/20210224-File-1.png"
        title="File-1" /></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="c1">// pathname
</span><span class="c1"></span><span class="n">File</span> <span class="n">liuBei</span> <span class="o">=</span> <span class="k">new</span> <span class="n">File</span><span class="o">(</span><span class="s">&#34;D:/三国/刘备.jpg&#34;</span><span class="o">);</span>
<span class="c1">// String parent, String child
</span><span class="c1"></span><span class="n">File</span> <span class="n">guanYu</span> <span class="o">=</span> <span class="k">new</span> <span class="n">File</span><span class="o">(</span><span class="s">&#34;D:/三国&#34;</span><span class="o">,</span> <span class="s">&#34;关羽.jpg&#34;</span><span class="o">);</span>
<span class="c1">// 目录
</span><span class="c1"></span><span class="n">File</span> <span class="n">sanGuo</span> <span class="o">=</span> <span class="k">new</span> <span class="n">File</span><span class="o">(</span><span class="s">&#34;D:/三国&#34;</span><span class="o">);</span>
<span class="c1">// File parent, String child
</span><span class="c1"></span><span class="n">File</span> <span class="n">zhangFei</span> <span class="o">=</span> <span class="k">new</span> <span class="n">File</span><span class="o">(</span><span class="n">sanGuo</span><span class="o">,</span> <span class="s">&#34;张飞.txt&#34;</span><span class="o">);</span>
<span class="c1">// 可以声明不存在的文件
</span><span class="c1"></span><span class="n">File</span> <span class="n">zhuGeLiang</span> <span class="o">=</span> <span class="k">new</span> <span class="n">File</span><span class="o">(</span><span class="n">sanGuo</span><span class="o">,</span> <span class="s">&#34;诸葛亮.txt&#34;</span><span class="o">);</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="绝对路径和相对路径">绝对路径和相对路径</h3>
<p>绝对路径：从盘符开始的路径，表示一个完整的路径。(经常使用)<br>
相对路径：相对于当前项目目录的路径</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="n">File</span> <span class="n">f</span> <span class="o">=</span> <span class="k">new</span> <span class="n">File</span><span class="o">(</span><span class="s">&#34;D:/bbb.java&#34;</span><span class="o">);</span>
<span class="c1">// D:\bbb.java
</span><span class="c1"></span><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">f</span><span class="o">.</span><span class="na">getAbsolutePath</span><span class="o">());</span>
<span class="n">File</span> <span class="n">f2</span> <span class="o">=</span> <span class="k">new</span> <span class="n">File</span><span class="o">(</span><span class="s">&#34;bbb.java&#34;</span><span class="o">);</span>
<span class="c1">// F:\code\ad\bbb.java
</span><span class="c1"></span><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">f2</span><span class="o">.</span><span class="na">getAbsolutePath</span><span class="o">());</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="路径分隔符和换行符">路径分隔符和换行符</h3>
<p>路径分隔符</p>
<ul>
<li>windows 的路径分隔符： <code>\</code></li>
<li>linux 的路径分隔符： <code>/</code></li>
</ul>
<p>java 有常量 <code>java.io.File#separator</code> 可以表示不同系统的路径分隔符</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="cm">/**
</span><span class="cm"> * The system-dependent default name-separator character, represented as a
</span><span class="cm"> * string for convenience.  This string contains a single character, namely
</span><span class="cm"> * &lt;code&gt;{@link #separatorChar}&lt;/code&gt;.
</span><span class="cm"> */</span>
<span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">separator</span> <span class="o">=</span> <span class="s">&#34;&#34;</span> <span class="o">+</span> <span class="n">separatorChar</span><span class="o">;</span>
</code></pre></td></tr></table>
</div>
</div><p>换行符</p>
<ul>
<li>windows 的换行符： <code>\r\n</code></li>
<li>linux 的换行符： <code>\n</code></li>
</ul>
<p>java 提供了方法 <code>java.lang.System#lineSeparator</code> 可以获取不同平台的换行符</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="cm">/**
</span><span class="cm"> * Returns the system-dependent line separator string.  It always
</span><span class="cm"> * returns the same value - the initial value of the {@linkplain
</span><span class="cm"> * #getProperty(String) system property} {@code line.separator}.
</span><span class="cm"> *
</span><span class="cm"> * &lt;p&gt;On UNIX systems, it returns {@code &#34;\n&#34;}; on Microsoft
</span><span class="cm"> * Windows systems it returns {@code &#34;\r\n&#34;}.
</span><span class="cm"> *
</span><span class="cm"> * @return the system-dependent line separator string
</span><span class="cm"> * @since 1.7
</span><span class="cm"> */</span>
<span class="kd">public</span> <span class="kd">static</span> <span class="n">String</span> <span class="nf">lineSeparator</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">lineSeparator</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="file-的常用方法">File 的常用方法</h3>
<h4 id="创建删除">创建、删除</h4>
<table>
<thead>
<tr>
<th>方法名</th>
<th>方法说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>boolean createNewFile() throws IOException</td>
<td>当该名称的文件不存在时，创建一个由该抽象路径名的空文件并返回true，当文件存在时，返回false</td>
</tr>
<tr>
<td>boolean mkdir()</td>
<td>创建由此抽象路径名命名的目录，不能级联创建目录</td>
</tr>
<tr>
<td>boolean mkdirs()</td>
<td>创建由此抽象路径名命名的目录，包括任何必需但不存在的父目录。级联创建目录</td>
</tr>
<tr>
<td>boolean delete()</td>
<td>删除由此抽象路径名表示的文件或目录</td>
</tr>
</tbody>
</table>
<ul>
<li>创建多级目录时，mkdir() 创建失败，返回false，mkdirs() 创建成功，返回true（推荐使用mkdirs）</li>
<li>delete() 删除目录时，目录内不为空时，删除失败，返回false， 即只能删除文件或者空目录</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="n">File</span> <span class="n">shuiHu</span> <span class="o">=</span> <span class="k">new</span> <span class="n">File</span><span class="o">(</span><span class="s">&#34;D:/四大名著/水浒传&#34;</span><span class="o">);</span>
<span class="c1">// 返回false 创建失败
</span><span class="c1"></span><span class="kt">boolean</span> <span class="n">mkdir</span> <span class="o">=</span> <span class="n">shuiHu</span><span class="o">.</span><span class="na">mkdir</span><span class="o">();</span>
<span class="c1">// 返回true 创建失败
</span><span class="c1"></span><span class="kt">boolean</span> <span class="n">mkdirs</span> <span class="o">=</span> <span class="n">shuiHu</span><span class="o">.</span><span class="na">mkdirs</span><span class="o">();</span>

<span class="n">File</span> <span class="n">four</span> <span class="o">=</span> <span class="k">new</span> <span class="n">File</span><span class="o">(</span><span class="s">&#34;D:/四大名著&#34;</span><span class="o">);</span>
<span class="c1">// 返回false 删除目录时必须目录为空才能删除成功，此时 D:/四大名著 目录下还有 水浒传 ，所以删除失败
</span><span class="c1"></span><span class="kt">boolean</span> <span class="n">delete</span> <span class="o">=</span> <span class="n">four</span><span class="o">.</span><span class="na">delete</span><span class="o">();</span>

<span class="n">File</span> <span class="n">shuiHu</span> <span class="o">=</span> <span class="k">new</span> <span class="n">File</span><span class="o">(</span><span class="s">&#34;D:/四大名著/水浒传&#34;</span><span class="o">);</span>
<span class="c1">// true 正确删除了水浒传目录
</span><span class="c1"></span><span class="kt">boolean</span> <span class="n">delete1</span> <span class="o">=</span> <span class="n">shuiHu</span><span class="o">.</span><span class="na">delete</span><span class="o">();</span>

<span class="n">File</span> <span class="n">liuBei</span> <span class="o">=</span> <span class="k">new</span> <span class="n">File</span><span class="o">(</span><span class="s">&#34;D:/三国/刘备.jpg&#34;</span><span class="o">);</span>
<span class="c1">// 返回true 正确删除了刘备.jpg文件
</span><span class="c1"></span><span class="kt">boolean</span> <span class="n">delete2</span> <span class="o">=</span> <span class="n">liuBei</span><span class="o">.</span><span class="na">delete</span><span class="o">();</span>
</code></pre></td></tr></table>
</div>
</div><p>使用递归的方式删除文件或目录</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kn">import</span> <span class="nn">java.io.File</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">FileDeleteTest</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">boolean</span> <span class="nf">deleteDirOrFile</span><span class="o">(</span><span class="n">String</span> <span class="n">fileName</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">File</span> <span class="n">file</span> <span class="o">=</span> <span class="k">new</span> <span class="n">File</span><span class="o">(</span><span class="n">fileName</span><span class="o">);</span> <span class="c1">//根据指定文件名创建 File 对象
</span><span class="c1"></span>
        <span class="k">if</span> <span class="o">(</span><span class="n">file</span><span class="o">.</span><span class="na">exists</span><span class="o">())</span> <span class="o">{</span>
            <span class="c1">//待删除的存在
</span><span class="c1"></span>            <span class="k">if</span> <span class="o">(</span><span class="n">file</span><span class="o">.</span><span class="na">isFile</span><span class="o">())</span> <span class="o">{</span>
                <span class="c1">//如果待删除的是文件
</span><span class="c1"></span>                <span class="k">return</span> <span class="n">deleteFile</span><span class="o">(</span><span class="n">file</span><span class="o">);</span>
            <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
                <span class="c1">//如果待删除的是目录
</span><span class="c1"></span>                <span class="k">return</span> <span class="n">deleteDir</span><span class="o">(</span><span class="n">file</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="c1">//待删除的不存在
</span><span class="c1"></span>            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;待删除的文件不存在&#34;</span><span class="o">);</span>
            <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">boolean</span> <span class="nf">deleteFile</span><span class="o">(</span><span class="n">File</span> <span class="n">file</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">file</span><span class="o">.</span><span class="na">delete</span><span class="o">())</span> <span class="o">{</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;文件&#34;</span> <span class="o">+</span> <span class="n">file</span><span class="o">.</span><span class="na">getName</span><span class="o">()</span> <span class="o">+</span> <span class="s">&#34;删除成功&#34;</span><span class="o">);</span>
            <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;文件&#34;</span> <span class="o">+</span> <span class="n">file</span><span class="o">.</span><span class="na">getName</span><span class="o">()</span> <span class="o">+</span> <span class="s">&#34;删除失败&#34;</span><span class="o">);</span>
            <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="kd">static</span> <span class="kt">boolean</span> <span class="nf">deleteDir</span><span class="o">(</span><span class="n">File</span> <span class="n">file</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">File</span><span class="o">[]</span> <span class="n">files</span> <span class="o">=</span> <span class="n">file</span><span class="o">.</span><span class="na">listFiles</span><span class="o">();</span> <span class="c1">//列出该文件夹下的所有文件及文件夹
</span><span class="c1"></span>        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">files</span><span class="o">.</span><span class="na">length</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
            <span class="c1">//使用递归的方式删除该文件夹下的所有文件和文件夹
</span><span class="c1"></span>            <span class="n">deleteDirOrFile</span><span class="o">(</span><span class="n">files</span><span class="o">[</span><span class="n">i</span><span class="o">].</span><span class="na">getAbsolutePath</span><span class="o">());</span>
        <span class="o">}</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">file</span><span class="o">.</span><span class="na">delete</span><span class="o">())</span> <span class="o">{</span> <span class="c1">//删除该文件夹
</span><span class="c1"></span>            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;目录&#34;</span> <span class="o">+</span> <span class="n">file</span><span class="o">.</span><span class="na">getName</span><span class="o">()</span> <span class="o">+</span> <span class="s">&#34;删除成功&#34;</span><span class="o">);</span>
            <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
        <span class="o">}</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;目录&#34;</span> <span class="o">+</span> <span class="n">file</span><span class="o">.</span><span class="na">getName</span><span class="o">()</span> <span class="o">+</span> <span class="s">&#34;删除失败&#34;</span><span class="o">);</span>
        <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">deleteDirOrFile</span><span class="o">(</span><span class="s">&#34;D:\\1\\142&#34;</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><h4 id="文件检测">文件检测</h4>
<table>
<thead>
<tr>
<th>方法名</th>
<th>方法说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>boolean isDirectory()</td>
<td>判断是否是目录</td>
</tr>
<tr>
<td>boolean isFile()</td>
<td>判断是否是文件</td>
</tr>
<tr>
<td>boolean exists()</td>
<td>判断文件或目录是否存在</td>
</tr>
<tr>
<td>boolean canWrite()</td>
<td>文件是否可写</td>
</tr>
<tr>
<td>boolean canRead()</td>
<td>文件是否可读</td>
</tr>
<tr>
<td>boolean canExecute()</td>
<td>文件是否可执行</td>
</tr>
<tr>
<td>long lastModified()</td>
<td>返回文件的上次修改时间</td>
</tr>
</tbody>
</table>
<p>注意</p>
<ul>
<li>文件或目录不存在时， isDirectory() 或 isFile() 返回 false</li>
<li>可读、可写、可执行是对操作系统给文件赋予的权限</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="n">File</span> <span class="n">xiYou</span> <span class="o">=</span> <span class="k">new</span> <span class="n">File</span><span class="o">(</span><span class="s">&#34;D:/西游记&#34;</span><span class="o">);</span>
<span class="c1">// 文件或目录不存在时 返回false
</span><span class="c1"></span><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">xiYou</span><span class="o">.</span><span class="na">isDirectory</span><span class="o">());</span>
</code></pre></td></tr></table>
</div>
</div><h4 id="文件获取">文件获取</h4>
<table>
<thead>
<tr>
<th>方法名</th>
<th>方法说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>String getAbsolutePath()</td>
<td>返回File对象的绝对路径字符串</td>
</tr>
<tr>
<td>String getPath()</td>
<td>将此抽象路径名转换为路径名字符串</td>
</tr>
<tr>
<td>String getName()</td>
<td>返回文件或目录的名称</td>
</tr>
<tr>
<td>long length()</td>
<td>返回由此File表示的文件的字节数</td>
</tr>
<tr>
<td>String[] list()</td>
<td>返回目录中的文件和目录的名称字符串数组</td>
</tr>
<tr>
<td>File[] listFiles()</td>
<td>返回目录中的文件和目录的File对象数组</td>
</tr>
<tr>
<td>String[] list(FilenameFilter filter)</td>
<td>返回目录中指定的文件和目录的名称字符串数组</td>
</tr>
<tr>
<td>File[] listFiles(FileFilter filter)</td>
<td>返回目录中指定的文件和目录的File对象数组</td>
</tr>
</tbody>
</table>
<p>注意</p>
<ul>
<li>length() 返回的是文件的字节数，目录的长度是0</li>
<li>getPath()在用绝对路径表示的文件时相同，用相对路径表示的文件时不同</li>
<li>listFiles和list方法的调用，必须是实际存在的目录，否则返回null</li>
<li>listFiles和list 可以传入FilenameFilter的实现类，用于按照文件名称过滤文件</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="n">File</span> <span class="n">shuiHu</span> <span class="o">=</span> <span class="k">new</span> <span class="n">File</span><span class="o">(</span><span class="s">&#34;D:/水浒传&#34;</span><span class="o">);</span>
<span class="c1">// 0
</span><span class="c1"></span><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">shuiHu</span><span class="o">.</span><span class="na">length</span><span class="o">());</span>
<span class="n">File</span> <span class="n">liuBei</span> <span class="o">=</span> <span class="k">new</span> <span class="n">File</span><span class="o">(</span><span class="s">&#34;D:/三国/刘备.jpg&#34;</span><span class="o">);</span>
<span class="c1">// 24591
</span><span class="c1"></span><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">liuBei</span><span class="o">.</span><span class="na">length</span><span class="o">());</span>

<span class="n">File</span> <span class="n">f</span> <span class="o">=</span> <span class="k">new</span> <span class="n">File</span><span class="o">(</span><span class="s">&#34;D:/bbb.java&#34;</span><span class="o">);</span>
 <span class="c1">// D:\bbb.java
</span><span class="c1"></span><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">f</span><span class="o">.</span><span class="na">getPath</span><span class="o">());</span>

<span class="n">File</span> <span class="n">f2</span> <span class="o">=</span> <span class="k">new</span> <span class="n">File</span><span class="o">(</span><span class="s">&#34;bbb.java&#34;</span><span class="o">);</span>
<span class="c1">// bbb.java
</span><span class="c1"></span><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">f2</span><span class="o">.</span><span class="na">getPath</span><span class="o">());</span>

<span class="n">File</span> <span class="n">sanGuo2</span> <span class="o">=</span> <span class="k">new</span> <span class="n">File</span><span class="o">(</span><span class="s">&#34;D:/三国2&#34;</span><span class="o">);</span>
<span class="c1">// 该目录不存在，返回null
</span><span class="c1"></span><span class="n">String</span><span class="o">[]</span> <span class="n">list</span> <span class="o">=</span> <span class="n">sanGuo2</span><span class="o">.</span><span class="na">list</span><span class="o">();</span>
</code></pre></td></tr></table>
</div>
</div><p>过滤文件的接口</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="nd">@FunctionalInterface</span>
<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">FilenameFilter</span> <span class="o">{</span>
  	<span class="c1">// 参数为目录和指定过滤名称
</span><span class="c1"></span>    <span class="kt">boolean</span> <span class="nf">accept</span><span class="o">(</span><span class="n">File</span> <span class="n">dir</span><span class="o">,</span> <span class="n">String</span> <span class="n">name</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p><strong>java 查询目录下的所有文件及目录</strong></p>
<blockquote>
<p>参考： <a href="https://www.cnblogs.com/henuyuxiang/p/11608997.html">https://www.cnblogs.com/henuyuxiang/p/11608997.html</a></p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">filesList</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;&gt;();</span>
    <span class="n">findFileList</span><span class="o">(</span><span class="s">&#34;D:\\1\\jsp-demo-0.0.1-SNAPSHOT1&#34;</span><span class="o">,</span> <span class="n">filesList</span><span class="o">);</span>
    <span class="k">for</span> <span class="o">(</span><span class="n">String</span> <span class="n">str</span> <span class="o">:</span> <span class="n">filesList</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">str</span><span class="o">);</span>
    <span class="o">}</span>
    
<span class="o">}</span>


<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">findFileList</span><span class="o">(</span><span class="n">String</span> <span class="n">dir</span><span class="o">,</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">fileList</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">File</span> <span class="n">file</span> <span class="o">=</span> <span class="k">new</span> <span class="n">File</span><span class="o">(</span><span class="n">dir</span><span class="o">);</span>
    <span class="k">if</span> <span class="o">(!</span><span class="n">file</span><span class="o">.</span><span class="na">exists</span><span class="o">()</span> <span class="o">||</span> <span class="o">!</span><span class="n">file</span><span class="o">.</span><span class="na">isDirectory</span><span class="o">())</span> <span class="o">{</span>
        <span class="c1">//若文件不存在或者文件不为目录，则返回
</span><span class="c1"></span>        <span class="k">return</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="n">File</span><span class="o">[]</span> <span class="n">files</span> <span class="o">=</span> <span class="n">file</span><span class="o">.</span><span class="na">listFiles</span><span class="o">();</span> <span class="c1">//获取目录下所有目录和文件
</span><span class="c1"></span>    <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">files</span><span class="o">.</span><span class="na">length</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">files</span><span class="o">[</span><span class="n">i</span><span class="o">].</span><span class="na">isFile</span><span class="o">())</span> <span class="o">{</span>
            <span class="c1">//将文件添加进list
</span><span class="c1"></span>            <span class="n">fileList</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">files</span><span class="o">[</span><span class="n">i</span><span class="o">].</span><span class="na">getAbsolutePath</span><span class="o">());</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="c1">//将文件夹添加进list
</span><span class="c1"></span>            <span class="n">fileList</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">files</span><span class="o">[</span><span class="n">i</span><span class="o">].</span><span class="na">getAbsolutePath</span><span class="o">());</span>
            <span class="c1">//递归文件夹
</span><span class="c1"></span>            <span class="n">findFileList</span><span class="o">(</span><span class="n">files</span><span class="o">[</span><span class="n">i</span><span class="o">].</span><span class="na">getAbsolutePath</span><span class="o">(),</span> <span class="n">fileList</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="io-流">IO 流</h2>
<p>IO 流主要是读取、传输、写入数据内容的。</p>
<p>这里的主体说的都是程序(即内存)，从外部设备中读取数据到程序中 即为输入流，从程序中写出到外部程序中即为输出流</p>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/images/20210224-%e8%be%93%e5%85%a5%e6%b5%81%e4%b8%8e%e8%be%93%e5%87%ba%e6%b5%81.png"
        data-srcset="/images/20210224-%e8%be%93%e5%85%a5%e6%b5%81%e4%b8%8e%e8%be%93%e5%87%ba%e6%b5%81.png, /images/20210224-%e8%be%93%e5%85%a5%e6%b5%81%e4%b8%8e%e8%be%93%e5%87%ba%e6%b5%81.png 1.5x, /images/20210224-%e8%be%93%e5%85%a5%e6%b5%81%e4%b8%8e%e8%be%93%e5%87%ba%e6%b5%81.png 2x"
        data-sizes="auto"
        alt="/images/20210224-输入流与输出流.png"
        title="输入流与输出流" /></p>
<h3 id="io-的分类">IO 的分类</h3>
<ul>
<li>本地 IO 和网络 IO
<ul>
<li>本地IO主要是操作本地文件，例如在windows上复制粘贴操作文件，都可以使用java的io来操作</li>
<li>网络IO主要是通过网络发送数据，或者通过网络上传、下载文件</li>
</ul>
</li>
<li>按流向分：输入流和输出流</li>
<li>按数据类型分：字节流和字符流</li>
<li>按功能分：节点流和处理流
<ul>
<li>程序直接操作目标设备的类称为节点流</li>
<li>对节点流进行装饰，功能、性能进行增强，称为处理流</li>
</ul>
</li>
</ul>
<p>IO 流的主要入口是数据源，下面列举常见的源设备和目的设备</p>
<p>源设备</p>
<ul>
<li>硬盘(文件)</li>
<li>内存(字节数组、字符串等)</li>
<li>网络(Socket)</li>
<li>键盘(System.in)</li>
</ul>
<p>目的设备</p>
<ul>
<li>硬盘(文件)</li>
<li>内存(字节数组、字符串等)</li>
<li>网络(Socket)</li>
<li>控制台(System.out)</li>
</ul>
<h3 id="字节流和字符流">字节流和字符流</h3>
<p>字节流和字符流都实现了 Closeable 接口，实现了 close() 方法</p>
<p>字节流定义如下</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">InputStream</span> <span class="kd">implements</span> <span class="n">Closeable</span>
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">OutputStream</span> <span class="kd">implements</span> <span class="n">Closeable</span><span class="o">,</span> <span class="n">Flushable</span>
</code></pre></td></tr></table>
</div>
</div><p>字符流定义如下</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">Reader</span> <span class="kd">implements</span> <span class="n">Readable</span><span class="o">,</span> <span class="n">Closeable</span>
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">Writer</span> <span class="kd">implements</span> <span class="n">Appendable</span><span class="o">,</span> <span class="n">Closeable</span><span class="o">,</span> <span class="n">Flushable</span>
</code></pre></td></tr></table>
</div>
</div><p>Closeable 接口定义如下</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="cm">/**
</span><span class="cm"> * A {@code Closeable} is a source or destination of data that can be closed.
</span><span class="cm"> * The close method is invoked to release resources that the object is
</span><span class="cm"> * holding (such as open files).
</span><span class="cm"> *
</span><span class="cm"> * @since 1.5
</span><span class="cm"> */</span>
<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">Closeable</span> <span class="kd">extends</span> <span class="n">AutoCloseable</span> <span class="o">{</span>

    <span class="cm">/**
</span><span class="cm">     * Closes this stream and releases any system resources associated
</span><span class="cm">     * with it. If the stream is already closed then invoking this
</span><span class="cm">     * method has no effect.
</span><span class="cm">     *
</span><span class="cm">     * &lt;p&gt; As noted in {@link AutoCloseable#close()}, cases where the
</span><span class="cm">     * close may fail require careful attention. It is strongly advised
</span><span class="cm">     * to relinquish the underlying resources and to internally
</span><span class="cm">     * &lt;em&gt;mark&lt;/em&gt; the {@code Closeable} as closed, prior to throwing
</span><span class="cm">     * the {@code IOException}.
</span><span class="cm">     *
</span><span class="cm">     * @throws IOException if an I/O error occurs
</span><span class="cm">     */</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">close</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">IOException</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p>Flushable 接口定义如下</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="cm">/**
</span><span class="cm"> * A &lt;tt&gt;Flushable&lt;/tt&gt; is a destination of data that can be flushed.  The
</span><span class="cm"> * flush method is invoked to write any buffered output to the underlying
</span><span class="cm"> * stream.
</span><span class="cm"> *
</span><span class="cm"> * @since 1.5
</span><span class="cm"> */</span>
<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">Flushable</span> <span class="o">{</span>

    <span class="cm">/**
</span><span class="cm">     * Flushes this stream by writing any buffered output to the underlying
</span><span class="cm">     * stream.
</span><span class="cm">     *
</span><span class="cm">     * @throws IOException If an I/O error occurs
</span><span class="cm">     */</span>
    <span class="kt">void</span> <span class="nf">flush</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">IOException</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><table>
<thead>
<tr>
<th>方法名</th>
<th>方法说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>public void close() throws IOException</td>
<td>流操作完毕后，必须释放系统资源，调用close方法，一般放在finally块中保证一定被执行!</td>
</tr>
</tbody>
</table>
<p>注意</p>
<ul>
<li>程序中打开的IO资源不属于内存资源，垃圾回收机制无法回收该资源，需要显式的关闭文件资源</li>
<li>IO流可以在finally语句块中关闭，也可以使用jdk7的try-with-resource特性简化IO流的关闭
<ul>
<li>try-with-resources语句保证了每个声明了的资源在语句结束的时候都会被关闭。任何实现了java.lang.AutoCloseable接口的对象和实现了java .io .Closeable接口的对象，都可以当做资源使用。</li>
<li>示例
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="k">try</span> <span class="o">(</span><span class="n">ObjectOutputStream</span> <span class="n">oos</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ObjectOutputStream</span><span class="o">(</span><span class="k">new</span> <span class="n">FileOutputStream</span><span class="o">(</span><span class="s">&#34;tempFile&#34;</span><span class="o">)))</span> <span class="o">{</span>
           <span class="n">oos</span><span class="o">.</span><span class="na">writeObject</span><span class="o">(</span><span class="n">user</span><span class="o">);</span>
       <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">IOException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
           <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
       <span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div></li>
</ul>
</li>
</ul>
<h4 id="字节流">字节流</h4>
<p>一切皆为字节</p>
<p>一切文件数据(文本、图片、视频等)在存储时，都是以二进制的形式保存，都可以通过使用字节流传输。</p>
<p>InputStream 是字节输入流的顶层抽象</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">InputStream</span> <span class="kd">implements</span> <span class="n">Closeable</span>
</code></pre></td></tr></table>
</div>
</div><p>核心方法如下</p>
<ul>
<li><code>int read() throws IOException;</code>: 每次读取一个字节的数据，提升为int类型，读取到文件末尾时返回 -1</li>
<li><code>int read(byte b[])throws IOException</code>: 每次读取到字节数组中，返回读取到的有效字节个数，读取到末尾时返回 -1(常用)</li>
<li><code>int read(byte b[], int off, int len)</code>: 每次读取到字节数组中，从偏移量off开始，长度为len，返回读取到的有效字节个数，读取到末尾时返回 -1</li>
</ul>
<p>OutputStream 是字节输出流的顶层抽象</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">OutputStream</span> <span class="kd">implements</span> <span class="n">Closeable</span><span class="o">,</span> <span class="n">Flushable</span>
</code></pre></td></tr></table>
</div>
</div><p>核心方法如下</p>
<ul>
<li><code>void write(int b) throws IOException;</code>: 将int值写入到输出流中</li>
<li><code>void write(byte[] b) throws IOException;</code>: 将字节数组写入到输出流中</li>
<li><code>void write(byte b[], int off, int len) throws IOException</code>: 将字节数组从偏移量off开始，写入len个长度到输出流中</li>
<li><code>void flush() throws IOException</code>: 刷新输出流并强制缓冲的字节被写出</li>
</ul>
<h5 id="文件节点流">文件节点流</h5>
<p>字节流 <code>java.io.InputStream</code> 和 <code>java.io.OutputStream</code> 有很多的实现类，先介绍下文件节点流，即目标设备是文件，输入流和输出流对应的是 <code>java.io.FileInputStream</code> 和 <code>java.io.FileOutputStream</code></p>
<p>FileInputStream 主要从磁盘文件中读取数据，常用构造方法如下</p>
<ul>
<li>public FileInputStream(File file) throws FileNotFoundException</li>
<li>public FileInputStream(String name) throws FileNotFoundException</li>
</ul>
<p>当传入的文件不存在时，运行时会抛出 FileNotFoundException 异常</p>
<p>主要方法介绍</p>
<ol>
<li>
<p>read() 从输入流中读取一个字节并返回，当输入流没准备好时该方法会阻塞。如果读到文件末尾返回 -1 ，只能读取英文字符，若读取中文会出现乱码，因为一个英文字符占一个字节，中文字符占多个字节</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"> <span class="cm">/**
</span><span class="cm">  * Reads a byte of data from this input stream. This method blocks
</span><span class="cm">  * if no input is yet available.
</span><span class="cm">  *
</span><span class="cm">  * @return     the next byte of data, or &lt;code&gt;-1&lt;/code&gt; if the end of the
</span><span class="cm">  *             file is reached.
</span><span class="cm">  * @exception  IOException  if an I/O error occurs.
</span><span class="cm">  */</span>
 <span class="kd">public</span> <span class="kt">int</span> <span class="nf">read</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="o">{</span>
     <span class="k">return</span> <span class="n">read0</span><span class="o">();</span>
 <span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p>示例</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"> <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
     <span class="n">File</span> <span class="n">file</span> <span class="o">=</span> <span class="k">new</span> <span class="n">File</span><span class="o">(</span><span class="s">&#34;D:/三国/诸葛亮.txt&#34;</span><span class="o">);</span>
     <span class="k">try</span><span class="o">(</span><span class="n">FileInputStream</span> <span class="n">fis</span> <span class="o">=</span> <span class="k">new</span> <span class="n">FileInputStream</span><span class="o">(</span><span class="n">file</span><span class="o">)){</span>

         <span class="kt">int</span> <span class="n">b</span><span class="o">;</span>
         <span class="k">while</span> <span class="o">((</span><span class="n">b</span> <span class="o">=</span> <span class="n">fis</span><span class="o">.</span><span class="na">read</span><span class="o">())</span> <span class="o">!=</span> <span class="o">-</span><span class="n">1</span><span class="o">){</span>
             <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">((</span><span class="kt">char</span><span class="o">)</span><span class="n">b</span><span class="o">);</span>
         <span class="o">}</span>
     <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">FileNotFoundException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
         <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
     <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">IOException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
         <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
     <span class="o">}</span>
 <span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>read(byte[])</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="cm">/**
</span><span class="cm"> * Reads up to &lt;code&gt;byte.length&lt;/code&gt; bytes of data from this
</span><span class="cm"> * input stream into an array of bytes. This method blocks until some
</span><span class="cm"> * input is available.
</span><span class="cm"> * &lt;p&gt;
</span><span class="cm"> * This method simply performs the call
</span><span class="cm"> * &lt;code&gt;read(b, 0, b.length)&lt;/code&gt; and returns
</span><span class="cm"> * the  result. It is important that it does
</span><span class="cm"> * &lt;i&gt;not&lt;/i&gt; do &lt;code&gt;in.read(b)&lt;/code&gt; instead;
</span><span class="cm"> * certain subclasses of  &lt;code&gt;FilterInputStream&lt;/code&gt;
</span><span class="cm"> * depend on the implementation strategy actually
</span><span class="cm"> * used.
</span><span class="cm"> *
</span><span class="cm"> * @param      b   the buffer into which the data is read.
</span><span class="cm"> * @return     the total number of bytes read into the buffer, or
</span><span class="cm"> *             &lt;code&gt;-1&lt;/code&gt; if there is no more data because the end of
</span><span class="cm"> *             the stream has been reached.
</span><span class="cm"> * @exception  IOException  if an I/O error occurs.
</span><span class="cm"> * @see        java.io.FilterInputStream#read(byte[], int, int)
</span><span class="cm"> */</span>
<span class="kd">public</span> <span class="kt">int</span> <span class="nf">read</span><span class="o">(</span><span class="kt">byte</span> <span class="n">b</span><span class="o">[])</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">read</span><span class="o">(</span><span class="n">b</span><span class="o">,</span> <span class="n">0</span><span class="o">,</span> <span class="n">b</span><span class="o">.</span><span class="na">length</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p>示例</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">File</span> <span class="n">file</span> <span class="o">=</span> <span class="k">new</span> <span class="n">File</span><span class="o">(</span><span class="s">&#34;D:/三国/诸葛亮.txt&#34;</span><span class="o">);</span>
    <span class="k">try</span><span class="o">(</span><span class="n">FileInputStream</span> <span class="n">fis</span> <span class="o">=</span> <span class="k">new</span> <span class="n">FileInputStream</span><span class="o">(</span><span class="n">file</span><span class="o">)){</span>

        <span class="kt">byte</span><span class="o">[]</span> <span class="n">bytes</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">byte</span><span class="o">[</span><span class="n">2</span><span class="o">];</span>
        <span class="k">while</span> <span class="o">(</span><span class="n">fis</span><span class="o">.</span><span class="na">read</span><span class="o">(</span><span class="n">bytes</span><span class="o">)</span> <span class="o">!=</span> <span class="o">-</span><span class="n">1</span><span class="o">){</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="k">new</span> <span class="n">String</span><span class="o">(</span><span class="n">bytes</span><span class="o">));</span>
        <span class="o">}</span>
    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">FileNotFoundException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">IOException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p>若 <code>D:/三国/诸葛亮.txt</code> 中存储的是 abcde ，那么上述代码的结果如下</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">ab
cd
ed
</code></pre></td></tr></table>
</div>
</div><p>由于最后一次读取时，只读到一个字节 e ，此时数组中还有上次残留的数据 cd ，只替换了 e ，所以最后输出了 ed</p>
<p>修改代码如下</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">File</span> <span class="n">file</span> <span class="o">=</span> <span class="k">new</span> <span class="n">File</span><span class="o">(</span><span class="s">&#34;D:/三国/诸葛亮.txt&#34;</span><span class="o">);</span>
    <span class="k">try</span><span class="o">(</span><span class="n">FileInputStream</span> <span class="n">fis</span> <span class="o">=</span> <span class="k">new</span> <span class="n">FileInputStream</span><span class="o">(</span><span class="n">file</span><span class="o">)){</span>

        <span class="kt">byte</span><span class="o">[]</span> <span class="n">bytes</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">byte</span><span class="o">[</span><span class="n">2</span><span class="o">];</span>
        <span class="kt">int</span> <span class="n">len</span><span class="o">;</span> <span class="c1">//len为每次读取的有效字节个数
</span><span class="c1"></span>        <span class="k">while</span> <span class="o">((</span><span class="n">len</span> <span class="o">=</span> <span class="n">fis</span><span class="o">.</span><span class="na">read</span><span class="o">(</span><span class="n">bytes</span><span class="o">))</span> <span class="o">!=</span> <span class="o">-</span><span class="n">1</span><span class="o">){</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="k">new</span> <span class="n">String</span><span class="o">(</span><span class="n">bytes</span><span class="o">,</span> <span class="n">0</span><span class="o">,</span> <span class="n">len</span><span class="o">));</span>
        <span class="o">}</span>
    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">FileNotFoundException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">IOException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>read(byte b[], int off, int len)</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="cm">/**
</span><span class="cm"> * Reads up to &lt;code&gt;len&lt;/code&gt; bytes of data from this input stream
</span><span class="cm"> * into an array of bytes. If &lt;code&gt;len&lt;/code&gt; is not zero, the method
</span><span class="cm"> * blocks until some input is available; otherwise, no
</span><span class="cm"> * bytes are read and &lt;code&gt;0&lt;/code&gt; is returned.
</span><span class="cm"> * &lt;p&gt;
</span><span class="cm"> * This method simply performs &lt;code&gt;in.read(b, off, len)&lt;/code&gt;
</span><span class="cm"> * and returns the result.
</span><span class="cm"> *
</span><span class="cm"> * @param      b     the buffer into which the data is read.
</span><span class="cm"> * @param      off   the start offset in the destination array &lt;code&gt;b&lt;/code&gt;
</span><span class="cm"> * @param      len   the maximum number of bytes read.
</span><span class="cm"> * @return     the total number of bytes read into the buffer, or
</span><span class="cm"> *             &lt;code&gt;-1&lt;/code&gt; if there is no more data because the end of
</span><span class="cm"> *             the stream has been reached.
</span><span class="cm"> * @exception  NullPointerException If &lt;code&gt;b&lt;/code&gt; is &lt;code&gt;null&lt;/code&gt;.
</span><span class="cm"> * @exception  IndexOutOfBoundsException If &lt;code&gt;off&lt;/code&gt; is negative,
</span><span class="cm"> * &lt;code&gt;len&lt;/code&gt; is negative, or &lt;code&gt;len&lt;/code&gt; is greater than
</span><span class="cm"> * &lt;code&gt;b.length - off&lt;/code&gt;
</span><span class="cm"> * @exception  IOException  if an I/O error occurs.
</span><span class="cm"> * @see        java.io.FilterInputStream#in
</span><span class="cm"> */</span>
<span class="kd">public</span> <span class="kt">int</span> <span class="nf">read</span><span class="o">(</span><span class="kt">byte</span> <span class="n">b</span><span class="o">[],</span> <span class="kt">int</span> <span class="n">off</span><span class="o">,</span> <span class="kt">int</span> <span class="n">len</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">in</span><span class="o">.</span><span class="na">read</span><span class="o">(</span><span class="n">b</span><span class="o">,</span> <span class="n">off</span><span class="o">,</span> <span class="n">len</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p>示例</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">File</span> <span class="n">file</span> <span class="o">=</span> <span class="k">new</span> <span class="n">File</span><span class="o">(</span><span class="s">&#34;D:/三国/诸葛亮.txt&#34;</span><span class="o">);</span>
    <span class="k">try</span><span class="o">(</span><span class="n">FileInputStream</span> <span class="n">fis</span> <span class="o">=</span> <span class="k">new</span> <span class="n">FileInputStream</span><span class="o">(</span><span class="n">file</span><span class="o">)){</span>

        <span class="kt">byte</span><span class="o">[]</span> <span class="n">bytes</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">byte</span><span class="o">[</span><span class="n">2</span><span class="o">];</span> <span class="c1">//存储已读取数据的缓存
</span><span class="c1"></span>        <span class="kt">int</span> <span class="n">off</span> <span class="o">=</span> <span class="n">0</span><span class="o">;</span> <span class="c1">//从缓存中读取字节放入缓存 bytes 的起始偏移量
</span><span class="c1"></span>        <span class="kt">int</span> <span class="n">len</span> <span class="o">=</span> <span class="n">2</span><span class="o">;</span> <span class="c1">//每次读取的字节数
</span><span class="c1"></span>        <span class="kt">int</span> <span class="n">readLen</span><span class="o">;</span> <span class="c1">//读取到的字节数，如果读取到文件末尾返回 -1
</span><span class="c1"></span>        <span class="k">while</span> <span class="o">((</span><span class="n">readLen</span> <span class="o">=</span> <span class="n">fis</span><span class="o">.</span><span class="na">read</span><span class="o">(</span><span class="n">bytes</span><span class="o">,</span> <span class="n">off</span><span class="o">,</span> <span class="n">len</span><span class="o">))</span> <span class="o">!=</span> <span class="o">-</span><span class="n">1</span><span class="o">){</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="k">new</span> <span class="n">String</span><span class="o">(</span><span class="n">bytes</span><span class="o">,</span><span class="n">off</span><span class="o">,</span><span class="n">readLen</span><span class="o">));</span>
        <span class="o">}</span>
    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">FileNotFoundException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">IOException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div></li>
</ol>
<p>使用数组读取，每次读取多个字节，减少了系统间的IO操作次数，从而提高了效率</p>
<ul>
<li>如果用read()读取文件，每读取一个字节就要访问一次硬盘，这种效率较低。</li>
<li>如果用read(byte[])读取文件，一次读取多个字节，当文件很大时，也会频繁访问硬盘。如果一次读取超多字节，效率也不会高。</li>
</ul>
<blockquote>
<p>java中文和英文占用的字节数：https://www.zhihu.com/question/30945431</p>
</blockquote>
<p>FileOutputStream 主要是向磁盘文件中写出数据，常用构造方法如下</p>
<ul>
<li><code>FileOutputStream(File file) throws FileNotFoundException</code>: 使用一个File对象来构建一个FileOutputStream</li>
<li><code>FileInputStream(String name) throws FileNotFoundException</code>: 使用一个文件名来构建一个FileOutputStream</li>
<li><code>FileOutputStream(File file, boolean append) throws FileNotFoundException</code>: append传true时，会对文件进行追加</li>
<li><code>FileOutputStream(String name, boolean append) throws FileNotFoundException</code>: append传true时，会对文件进行追加</li>
</ul>
<p>注意：</p>
<ul>
<li>上述构造方法执行后，如果file不存在，会自动创建该文件</li>
<li>如果file存在，append没有传或者传了false，会清空文件的数据</li>
<li>如果file存在，append传了true，不会清空文件的数据</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">File</span> <span class="n">file</span> <span class="o">=</span> <span class="k">new</span> <span class="n">File</span><span class="o">(</span><span class="s">&#34;D:/三国/赵云.txt&#34;</span><span class="o">);</span>
    <span class="k">try</span><span class="o">(</span><span class="n">FileOutputStream</span> <span class="n">fos</span> <span class="o">=</span> <span class="k">new</span> <span class="n">FileOutputStream</span><span class="o">(</span><span class="n">file</span><span class="o">);</span>
    <span class="n">FileOutputStream</span> <span class="n">fos1</span> <span class="o">=</span> <span class="k">new</span> <span class="n">FileOutputStream</span><span class="o">(</span><span class="s">&#34;D:/三国/司马懿.txt&#34;</span><span class="o">)){</span>

    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">FileNotFoundException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">IOException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p>上述代码中执行完后，<code>赵云.txt</code>和<code>司马懿.txt</code>都会自动创建出来</p>
<p>主要方法</p>
<ul>
<li>public void write(byte b[]) throws IOException</li>
<li>public void write(byte b[], int off, int len) throws IOException</li>
<li>public void write(int b) throws IOException</li>
</ul>
<p>向文件写数据</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">File</span> <span class="n">file</span> <span class="o">=</span> <span class="k">new</span> <span class="n">File</span><span class="o">(</span><span class="s">&#34;D:/三国/赵云.txt&#34;</span><span class="o">);</span>
    <span class="k">try</span><span class="o">(</span><span class="n">FileOutputStream</span> <span class="n">fos</span> <span class="o">=</span> <span class="k">new</span> <span class="n">FileOutputStream</span><span class="o">(</span><span class="n">file</span><span class="o">);</span>
    <span class="n">FileOutputStream</span> <span class="n">fos1</span> <span class="o">=</span> <span class="k">new</span> <span class="n">FileOutputStream</span><span class="o">(</span><span class="s">&#34;D:/三国/司马懿.txt&#34;</span><span class="o">)){</span>
        <span class="n">fos</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">97</span><span class="o">);</span>
        <span class="n">fos</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">98</span><span class="o">);</span>
        <span class="n">fos</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">99</span><span class="o">);</span>

        <span class="n">fos1</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="s">&#34;三国司马懿&#34;</span><span class="o">.</span><span class="na">getBytes</span><span class="o">());</span>
    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">FileNotFoundException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">IOException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p>上述代码每执行一次，文件里的内容就会被覆盖。如果想追加文件内容，则使用 <code>FileOutputStream fos = new FileOutputStream(file, true)</code> 方式定义</p>
<p>利用文件节点流实现文件的复制</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">copyFile</span><span class="o">(</span><span class="n">String</span> <span class="n">fromFile</span><span class="o">,</span> <span class="n">String</span> <span class="n">toFile</span><span class="o">){</span>
    <span class="k">try</span><span class="o">(</span><span class="n">InputStream</span> <span class="n">is</span> <span class="o">=</span> <span class="k">new</span> <span class="n">FileInputStream</span><span class="o">(</span><span class="k">new</span> <span class="n">File</span><span class="o">(</span><span class="n">fromFile</span><span class="o">));</span>
    <span class="n">OutputStream</span> <span class="n">os</span> <span class="o">=</span> <span class="k">new</span> <span class="n">FileOutputStream</span><span class="o">(</span><span class="k">new</span> <span class="n">File</span><span class="o">(</span><span class="n">toFile</span><span class="o">)))</span> <span class="o">{</span>
        <span class="kt">byte</span><span class="o">[]</span> <span class="n">bytes</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">byte</span><span class="o">[</span><span class="n">1024</span><span class="o">];</span>
        <span class="kt">int</span> <span class="n">len</span> <span class="o">=</span> <span class="n">0</span><span class="o">;</span>
        <span class="k">while</span> <span class="o">((</span><span class="n">len</span> <span class="o">=</span> <span class="n">is</span><span class="o">.</span><span class="na">read</span><span class="o">(</span><span class="n">bytes</span><span class="o">))</span> <span class="o">!=</span> <span class="o">-</span><span class="n">1</span><span class="o">){</span>
            <span class="n">os</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">bytes</span><span class="o">,</span> <span class="n">0</span><span class="o">,</span> <span class="n">len</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">FileNotFoundException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">IOException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><h5 id="内存节点流">内存节点流</h5>
<p><code>java.io.ByteArrayInputStream</code> 是从内存的字节数组中读取数据，定义如下</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="cm">/**
</span><span class="cm"> * A &lt;code&gt;ByteArrayInputStream&lt;/code&gt; contains
</span><span class="cm"> * an internal buffer that contains bytes that
</span><span class="cm"> * may be read from the stream. An internal
</span><span class="cm"> * counter keeps track of the next byte to
</span><span class="cm"> * be supplied by the &lt;code&gt;read&lt;/code&gt; method.
</span><span class="cm"> * &lt;p&gt;
</span><span class="cm"> * Closing a &lt;tt&gt;ByteArrayInputStream&lt;/tt&gt; has no effect. The methods in
</span><span class="cm"> * this class can be called after the stream has been closed without
</span><span class="cm"> * generating an &lt;tt&gt;IOException&lt;/tt&gt;.
</span><span class="cm"> *
</span><span class="cm"> * @author  Arthur van Hoff
</span><span class="cm"> * @see     java.io.StringBufferInputStream
</span><span class="cm"> * @since   JDK1.0
</span><span class="cm"> */</span>
<span class="kd">public</span>
<span class="kd">class</span> <span class="nc">ByteArrayInputStream</span> <span class="kd">extends</span> <span class="n">InputStream</span>
</code></pre></td></tr></table>
</div>
</div><p><code>java.io.ByteArrayInputStream</code> 构造方法如下</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="cm">/**
</span><span class="cm"> * Creates a &lt;code&gt;ByteArrayInputStream&lt;/code&gt;
</span><span class="cm"> * so that it  uses &lt;code&gt;buf&lt;/code&gt; as its
</span><span class="cm"> * buffer array.
</span><span class="cm"> * The buffer array is not copied.
</span><span class="cm"> * The initial value of &lt;code&gt;pos&lt;/code&gt;
</span><span class="cm"> * is &lt;code&gt;0&lt;/code&gt; and the initial value
</span><span class="cm"> * of  &lt;code&gt;count&lt;/code&gt; is the length of
</span><span class="cm"> * &lt;code&gt;buf&lt;/code&gt;.
</span><span class="cm"> *
</span><span class="cm"> * @param   buf   the input buffer.
</span><span class="cm"> */</span>
<span class="kd">public</span> <span class="nf">ByteArrayInputStream</span><span class="o">(</span><span class="kt">byte</span> <span class="n">buf</span><span class="o">[])</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">buf</span> <span class="o">=</span> <span class="n">buf</span><span class="o">;</span>
    <span class="k">this</span><span class="o">.</span><span class="na">pos</span> <span class="o">=</span> <span class="n">0</span><span class="o">;</span>
    <span class="k">this</span><span class="o">.</span><span class="na">count</span> <span class="o">=</span> <span class="n">buf</span><span class="o">.</span><span class="na">length</span><span class="o">;</span>
<span class="o">}</span>

<span class="cm">/**
</span><span class="cm"> * Creates &lt;code&gt;ByteArrayInputStream&lt;/code&gt;
</span><span class="cm"> * that uses &lt;code&gt;buf&lt;/code&gt; as its
</span><span class="cm"> * buffer array. The initial value of &lt;code&gt;pos&lt;/code&gt;
</span><span class="cm"> * is &lt;code&gt;offset&lt;/code&gt; and the initial value
</span><span class="cm"> * of &lt;code&gt;count&lt;/code&gt; is the minimum of &lt;code&gt;offset+length&lt;/code&gt;
</span><span class="cm"> * and &lt;code&gt;buf.length&lt;/code&gt;.
</span><span class="cm"> * The buffer array is not copied. The buffer&#39;s mark is
</span><span class="cm"> * set to the specified offset.
</span><span class="cm"> *
</span><span class="cm"> * @param   buf      the input buffer.
</span><span class="cm"> * @param   offset   the offset in the buffer of the first byte to read.
</span><span class="cm"> * @param   length   the maximum number of bytes to read from the buffer.
</span><span class="cm"> */</span>
<span class="kd">public</span> <span class="nf">ByteArrayInputStream</span><span class="o">(</span><span class="kt">byte</span> <span class="n">buf</span><span class="o">[],</span> <span class="kt">int</span> <span class="n">offset</span><span class="o">,</span> <span class="kt">int</span> <span class="n">length</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">buf</span> <span class="o">=</span> <span class="n">buf</span><span class="o">;</span>
    <span class="k">this</span><span class="o">.</span><span class="na">pos</span> <span class="o">=</span> <span class="n">offset</span><span class="o">;</span>
    <span class="k">this</span><span class="o">.</span><span class="na">count</span> <span class="o">=</span> <span class="n">Math</span><span class="o">.</span><span class="na">min</span><span class="o">(</span><span class="n">offset</span> <span class="o">+</span> <span class="n">length</span><span class="o">,</span> <span class="n">buf</span><span class="o">.</span><span class="na">length</span><span class="o">);</span>
    <span class="k">this</span><span class="o">.</span><span class="na">mark</span> <span class="o">=</span> <span class="n">offset</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p><code>java.io.ByteArrayOutputStream</code> 是向内存字节数组中写数据，内部维护了一个数组</p>
<p>定义如下</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java">
<span class="cm">/**
</span><span class="cm"> * This class implements an output stream in which the data is
</span><span class="cm"> * written into a byte array. The buffer automatically grows as data
</span><span class="cm"> * is written to it.
</span><span class="cm"> * The data can be retrieved using &lt;code&gt;toByteArray()&lt;/code&gt; and
</span><span class="cm"> * &lt;code&gt;toString()&lt;/code&gt;.
</span><span class="cm"> * &lt;p&gt;
</span><span class="cm"> * Closing a &lt;tt&gt;ByteArrayOutputStream&lt;/tt&gt; has no effect. The methods in
</span><span class="cm"> * this class can be called after the stream has been closed without
</span><span class="cm"> * generating an &lt;tt&gt;IOException&lt;/tt&gt;.
</span><span class="cm"> *
</span><span class="cm"> * @author  Arthur van Hoff
</span><span class="cm"> * @since   JDK1.0
</span><span class="cm"> */</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ByteArrayOutputStream</span> <span class="kd">extends</span> <span class="n">OutputStream</span>
</code></pre></td></tr></table>
</div>
</div><p><code>java.io.ByteArrayOutputStream</code> 构造方法如下</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="cm">/**
</span><span class="cm"> * Creates a new byte array output stream. The buffer capacity is
</span><span class="cm"> * initially 32 bytes, though its size increases if necessary.
</span><span class="cm"> */</span>
<span class="kd">public</span> <span class="nf">ByteArrayOutputStream</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">(</span><span class="n">32</span><span class="o">);</span>
<span class="o">}</span>

<span class="cm">/**
</span><span class="cm"> * Creates a new byte array output stream, with a buffer capacity of
</span><span class="cm"> * the specified size, in bytes.
</span><span class="cm"> *
</span><span class="cm"> * @param   size   the initial size.
</span><span class="cm"> * @exception  IllegalArgumentException if size is negative.
</span><span class="cm"> */</span>
<span class="kd">public</span> <span class="nf">ByteArrayOutputStream</span><span class="o">(</span><span class="kt">int</span> <span class="n">size</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">size</span> <span class="o">&lt;</span> <span class="n">0</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="n">IllegalArgumentException</span><span class="o">(</span><span class="s">&#34;Negative initial size: &#34;</span>
                                           <span class="o">+</span> <span class="n">size</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="n">buf</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">byte</span><span class="o">[</span><span class="n">size</span><span class="o">];</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p>注意：<code>java.io.ByteArrayInputStream</code> 和 <code>java.io.ByteArrayOutputStream</code> 不需要 close 数据源和抛出 IOException ，因为不涉及底层的系统调用</p>
<p>内存节点流代码示例</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">copyUseByteArrayStream</span><span class="o">(</span><span class="n">String</span> <span class="n">str</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">ByteArrayInputStream</span> <span class="n">bais</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ByteArrayInputStream</span><span class="o">(</span><span class="n">str</span><span class="o">.</span><span class="na">getBytes</span><span class="o">());</span>
    <span class="n">ByteArrayOutputStream</span> <span class="n">baos</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ByteArrayOutputStream</span><span class="o">();</span>

    <span class="kt">int</span> <span class="n">len</span> <span class="o">=</span> <span class="n">0</span><span class="o">;</span>
    <span class="k">while</span> <span class="o">((</span><span class="n">len</span> <span class="o">=</span> <span class="n">bais</span><span class="o">.</span><span class="na">read</span><span class="o">())</span> <span class="o">!=</span> <span class="o">-</span><span class="n">1</span><span class="o">){</span>
        <span class="n">baos</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">len</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="k">new</span> <span class="n">String</span><span class="o">(</span><span class="n">baos</span><span class="o">.</span><span class="na">toByteArray</span><span class="o">()));</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p>应用场景</p>
<ul>
<li>内存操作流一般在一些生成临时信息时会被使用（如果将临时信息保存在文件中，代码执行完还要删除文件比较麻烦，所以使用内存操作流将信息保存在内存中）</li>
<li>结合对象流，可以实现对象和字节数组的互转</li>
</ul>
<h4 id="字符流">字符流</h4>
<p>字符流封装了更加适合操作文本字符的方法</p>
<p><code>java.io.Reader</code> 用于读取文本字符</p>
<p>定义如下</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">Reader</span> <span class="kd">implements</span> <span class="n">Readable</span><span class="o">,</span> <span class="n">Closeable</span> 
</code></pre></td></tr></table>
</div>
</div><p>核心方法</p>
<ul>
<li><code>int read() throws IOException</code>: 从输入流中读取一个字符,读到文件末尾时返回 -1</li>
<li><code>int read(char cbuf[]) throws IOException</code>: 从输入流中读取字符到char数组中</li>
</ul>
<p><code>java.io.Writer</code> 用于写出文本字符</p>
<p>定义如下</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">Writer</span> <span class="kd">implements</span> <span class="n">Appendable</span><span class="o">,</span> <span class="n">Closeable</span><span class="o">,</span> <span class="n">Flushable</span>
</code></pre></td></tr></table>
</div>
</div><p>核心方法</p>
<ul>
<li><code>void write(int c) throws IOException</code>: 写入单个字符到输出流中</li>
<li><code>void write(char[] cbuf) throws IOException</code>: 写入字符数组到输出流中</li>
<li><code>void write(char[] cbuf, int off, int len) throws IOException</code>: 写入字符数组的一部分，偏移量off开始，长度为len到输出流中</li>
<li><code>void write(String str) throws IOException</code>: 直接写入字符串到输出流中(常用)</li>
<li><code>void write(String str, int off, int len) throws IOException</code>: 写入字符串的一部分，偏移量off开始，长度为len</li>
<li><code>Writer append(char c) throws IOException</code>: 追加字符到输出流中</li>
</ul>
<h5 id="文件节点流-1">文件节点流</h5>
<p>字符流操作纯文本字符的文件是最合适的，主要有 <code>java.io.FileReader</code> 和 <code>java.io.FileWriter</code></p>
<p>FileReader 定义如下</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="cm">/**
</span><span class="cm"> * Convenience class for reading character files.  The constructors of this
</span><span class="cm"> * class assume that the default character encoding and the default byte-buffer
</span><span class="cm"> * size are appropriate.  To specify these values yourself, construct an
</span><span class="cm"> * InputStreamReader on a FileInputStream.
</span><span class="cm"> *
</span><span class="cm"> * &lt;p&gt;&lt;code&gt;FileReader&lt;/code&gt; is meant for reading streams of characters.
</span><span class="cm"> * For reading streams of raw bytes, consider using a
</span><span class="cm"> * &lt;code&gt;FileInputStream&lt;/code&gt;.
</span><span class="cm"> *
</span><span class="cm"> * @see InputStreamReader
</span><span class="cm"> * @see FileInputStream
</span><span class="cm"> *
</span><span class="cm"> * @author      Mark Reinhold
</span><span class="cm"> * @since       JDK1.1
</span><span class="cm"> */</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">FileReader</span> <span class="kd">extends</span> <span class="n">InputStreamReader</span>
</code></pre></td></tr></table>
</div>
</div><p>FileReader 主要是向磁盘文件中写出数据，常用构造方法如下</p>
<ul>
<li><code>public FileReader(String fileName) throws FileNotFoundException</code></li>
<li><code>public FileReader(File file) throws FileNotFoundException</code></li>
</ul>
<p>注意： 当读取的文件不存在时，会抛出 <code>FileNotFoundException</code> ，这点和FileInputStream 一致</p>
<p>主要方法介绍</p>
<ol>
<li>
<p>read() 读取一个字符</p>
<p>示例</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="k">try</span><span class="o">(</span><span class="n">FileReader</span> <span class="n">fr</span> <span class="o">=</span> <span class="k">new</span> <span class="n">FileReader</span><span class="o">(</span><span class="s">&#34;D:/三国/赵云.txt&#34;</span><span class="o">)){</span>
    <span class="kt">int</span> <span class="n">b</span><span class="o">;</span>
    <span class="k">while</span> <span class="o">((</span><span class="n">b</span> <span class="o">=</span> <span class="n">fr</span><span class="o">.</span><span class="na">read</span><span class="o">())</span> <span class="o">!=</span> <span class="o">-</span><span class="n">1</span><span class="o">){</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">((</span><span class="kt">char</span><span class="o">)</span><span class="n">b</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">FileNotFoundException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">IOException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>read(char[]) 读取多个字符</p>
<p>示例</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="k">try</span><span class="o">(</span><span class="n">FileReader</span> <span class="n">fr</span> <span class="o">=</span> <span class="k">new</span> <span class="n">FileReader</span><span class="o">(</span><span class="s">&#34;D:/三国/赵云.txt&#34;</span><span class="o">)){</span>
    <span class="kt">int</span> <span class="n">len</span><span class="o">;</span>
    <span class="kt">char</span><span class="o">[]</span> <span class="n">data</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">char</span><span class="o">[</span><span class="n">2</span><span class="o">];</span>
    <span class="k">while</span> <span class="o">((</span><span class="n">len</span> <span class="o">=</span> <span class="n">fr</span><span class="o">.</span><span class="na">read</span><span class="o">(</span><span class="n">data</span><span class="o">))</span> <span class="o">!=</span> <span class="o">-</span><span class="n">1</span><span class="o">){</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="k">new</span> <span class="n">String</span><span class="o">(</span><span class="n">data</span><span class="o">,</span> <span class="n">0</span><span class="o">,</span> <span class="n">len</span><span class="o">));</span>
    <span class="o">}</span>
<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">FileNotFoundException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">IOException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div></li>
</ol>
<p>FileWriter 定义如下</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="cm">/**
</span><span class="cm"> * Convenience class for writing character files.  The constructors of this
</span><span class="cm"> * class assume that the default character encoding and the default byte-buffer
</span><span class="cm"> * size are acceptable.  To specify these values yourself, construct an
</span><span class="cm"> * OutputStreamWriter on a FileOutputStream.
</span><span class="cm"> *
</span><span class="cm"> * &lt;p&gt;Whether or not a file is available or may be created depends upon the
</span><span class="cm"> * underlying platform.  Some platforms, in particular, allow a file to be
</span><span class="cm"> * opened for writing by only one &lt;tt&gt;FileWriter&lt;/tt&gt; (or other file-writing
</span><span class="cm"> * object) at a time.  In such situations the constructors in this class
</span><span class="cm"> * will fail if the file involved is already open.
</span><span class="cm"> *
</span><span class="cm"> * &lt;p&gt;&lt;code&gt;FileWriter&lt;/code&gt; is meant for writing streams of characters.
</span><span class="cm"> * For writing streams of raw bytes, consider using a
</span><span class="cm"> * &lt;code&gt;FileOutputStream&lt;/code&gt;.
</span><span class="cm"> *
</span><span class="cm"> * @see OutputStreamWriter
</span><span class="cm"> * @see FileOutputStream
</span><span class="cm"> *
</span><span class="cm"> * @author      Mark Reinhold
</span><span class="cm"> * @since       JDK1.1
</span><span class="cm"> */</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">FileWriter</span> <span class="kd">extends</span> <span class="n">OutputStreamWriter</span>
</code></pre></td></tr></table>
</div>
</div><p>FileWriter构造方法如下</p>
<ul>
<li>public FileWriter(String fileName) throws IOException</li>
<li>public FileWriter(String fileName, boolean append) throws IOException</li>
<li>public FileWriter(File file) throws IOException</li>
<li>public FileWriter(File file, boolean append) throws IOException</li>
</ul>
<p>示例</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="n">FileWriter</span> <span class="n">fw</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="k">try</span> <span class="o">{</span>
    <span class="n">fw</span> <span class="o">=</span> <span class="k">new</span> <span class="n">FileWriter</span><span class="o">(</span><span class="s">&#34;D:/三国/孙权.txt&#34;</span><span class="o">);</span>
    <span class="n">fw</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">97</span><span class="o">);</span>
    <span class="n">fw</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="sc">&#39;b&#39;</span><span class="o">);</span>
    <span class="n">fw</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="s">&#34;权力&#34;</span><span class="o">);</span>
    <span class="n">fw</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">&#34;游戏&#34;</span><span class="o">);</span>
<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">IOException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
<span class="o">}</span><span class="k">finally</span> <span class="o">{</span>
    <span class="c1">//try {
</span><span class="c1"></span>    <span class="c1">//    fw.close();
</span><span class="c1"></span>    <span class="c1">//} catch (IOException e) {
</span><span class="c1"></span>    <span class="c1">//    e.printStackTrace();
</span><span class="c1"></span>    <span class="c1">//}
</span><span class="c1"></span><span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p>执行上述代码后，生成了 <code>D:/三国/孙权.txt</code> 文件，但文件中没有内容。原因是没有执行 close() 或 flush() 方法，数据还在缓冲区中，没有输出到文件中。</p>
<p>解决方法：finally 语句块中添加关闭流的操作</p>
<p>也可以使用 jdk7 的 try-with-resource 进行优化</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="k">try</span><span class="o">(</span><span class="n">FileWriter</span> <span class="n">fw</span> <span class="o">=</span> <span class="k">new</span> <span class="n">FileWriter</span><span class="o">(</span><span class="s">&#34;D:/三国/孙权.txt&#34;</span><span class="o">)){</span>
    <span class="n">fw</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">97</span><span class="o">);</span>
    <span class="n">fw</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="sc">&#39;b&#39;</span><span class="o">);</span>
    <span class="n">fw</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="s">&#34;权力&#34;</span><span class="o">);</span>
    <span class="n">fw</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">&#34;游戏&#34;</span><span class="o">);</span>
<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">IOException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><h5 id="内存字节流">内存字节流</h5>
<p>字符流也有对应的内存节点流，常用的有 <code>java.io.StringWriter</code> 和 <code>java.io.CharArrayWriter</code></p>
<p>StringWriter 是向内部的 StringBuffer 对象写数据。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="c1">// 定义
</span><span class="c1"></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">StringWriter</span> <span class="kd">extends</span> <span class="n">Writer</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="n">StringBuffer</span> <span class="n">buf</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">StringWriter</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">buf</span> <span class="o">=</span> <span class="k">new</span> <span class="n">StringBuffer</span><span class="o">();</span>
        <span class="n">lock</span> <span class="o">=</span> <span class="n">buf</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="c1">// 应用
</span><span class="c1"></span><span class="n">StringWriter</span> <span class="n">sw</span> <span class="o">=</span> <span class="k">new</span> <span class="n">StringWriter</span><span class="o">();</span>
<span class="n">sw</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="s">&#34;hello&#34;</span><span class="o">);</span>

<span class="n">StringBuffer</span> <span class="n">buffer</span> <span class="o">=</span> <span class="n">sw</span><span class="o">.</span><span class="na">getBuffer</span><span class="o">();</span>
<span class="c1">// 输出hello
</span><span class="c1"></span><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">buffer</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>
</code></pre></td></tr></table>
</div>
</div><p>CharArrayWriter 是向内部的 char 数组写数据</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="c1">// 定义
</span><span class="c1"></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">CharArrayWriter</span> <span class="kd">extends</span> <span class="n">Writer</span> <span class="o">{</span>
    <span class="kd">protected</span> <span class="kt">char</span> <span class="n">buf</span><span class="o">[];</span>
<span class="o">}</span>

<span class="c1">// 应用 
</span><span class="c1"></span><span class="n">CharArrayWriter</span> <span class="n">caw</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CharArrayWriter</span><span class="o">();</span>
<span class="n">caw</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="s">&#34;hello&#34;</span><span class="o">);</span>
<span class="kt">char</span><span class="o">[]</span> <span class="n">chars</span> <span class="o">=</span> <span class="n">caw</span><span class="o">.</span><span class="na">toCharArray</span><span class="o">();</span>
<span class="k">for</span> <span class="o">(</span><span class="kt">char</span> <span class="n">c</span> <span class="o">:</span> <span class="n">chars</span><span class="o">)</span> <span class="o">{</span>
	<span class="c1">// 输出了h e l l o
</span><span class="c1"></span>	<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">c</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p>四种常用节点流的使用总结</p>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/images/20210224-%e8%8a%82%e7%82%b9%e6%b5%81%e6%80%bb%e7%bb%93.png"
        data-srcset="/images/20210224-%e8%8a%82%e7%82%b9%e6%b5%81%e6%80%bb%e7%bb%93.png, /images/20210224-%e8%8a%82%e7%82%b9%e6%b5%81%e6%80%bb%e7%bb%93.png 1.5x, /images/20210224-%e8%8a%82%e7%82%b9%e6%b5%81%e6%80%bb%e7%bb%93.png 2x"
        data-sizes="auto"
        alt="/images/20210224-节点流总结.png"
        title="节点流总结" /></p>
<h4 id="字节流和字符流的共同点">字节流和字符流的共同点</h4>
<p>OutputStream、Reader、Writer都实现了Flushable接口，Flushable接口有flush()方法</p>
<p>flush()：强制刷新缓冲区的数据到目的地,刷新后流对象还可以继续使用</p>
<p>close(): 强制刷新缓冲区后关闭资源，关闭后流对象不可以继续使用</p>
<p>缓冲区：可以理解为内存区域，程序频繁操作资源（如文件）时，性能较低，因为读写内存较快，利用内存缓冲一部分数据，不要频繁的访问系统资源，是提高效率的一种方式</p>
<p>具体的流只要内部有维护了缓冲区，必须要close()或者flush()，不然不会真正的输出到文件中</p>
<h3 id="处理流">处理流</h3>
<p>上面的章节介绍了字节流和字符流的常用节点流，但是真正开发中都是使用更为强大的处理流</p>
<p>处理流是对节点流在功能上、性能上的增强</p>
<p>字节流的处理流的基类是 <code>java.io.FilterInputStream</code> 和 <code>java.io.FilterOutputStream</code></p>
<p>FilterInputStream 定义如下</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="cm">/**
</span><span class="cm"> * A &lt;code&gt;FilterInputStream&lt;/code&gt; contains
</span><span class="cm"> * some other input stream, which it uses as
</span><span class="cm"> * its  basic source of data, possibly transforming
</span><span class="cm"> * the data along the way or providing  additional
</span><span class="cm"> * functionality. The class &lt;code&gt;FilterInputStream&lt;/code&gt;
</span><span class="cm"> * itself simply overrides all  methods of
</span><span class="cm"> * &lt;code&gt;InputStream&lt;/code&gt; with versions that
</span><span class="cm"> * pass all requests to the contained  input
</span><span class="cm"> * stream. Subclasses of &lt;code&gt;FilterInputStream&lt;/code&gt;
</span><span class="cm"> * may further override some of  these methods
</span><span class="cm"> * and may also provide additional methods
</span><span class="cm"> * and fields.
</span><span class="cm"> *
</span><span class="cm"> * @author  Jonathan Payne
</span><span class="cm"> * @since   JDK1.0
</span><span class="cm"> */</span>
<span class="kd">public</span>
<span class="kd">class</span> <span class="nc">FilterInputStream</span> <span class="kd">extends</span> <span class="n">InputStream</span>
</code></pre></td></tr></table>
</div>
</div><p>FilterOutputStream 的定义如下</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="cm">/**
</span><span class="cm"> * This class is the superclass of all classes that filter output
</span><span class="cm"> * streams. These streams sit on top of an already existing output
</span><span class="cm"> * stream (the &lt;i&gt;underlying&lt;/i&gt; output stream) which it uses as its
</span><span class="cm"> * basic sink of data, but possibly transforming the data along the
</span><span class="cm"> * way or providing additional functionality.
</span><span class="cm"> * &lt;p&gt;
</span><span class="cm"> * The class &lt;code&gt;FilterOutputStream&lt;/code&gt; itself simply overrides
</span><span class="cm"> * all methods of &lt;code&gt;OutputStream&lt;/code&gt; with versions that pass
</span><span class="cm"> * all requests to the underlying output stream. Subclasses of
</span><span class="cm"> * &lt;code&gt;FilterOutputStream&lt;/code&gt; may further override some of these
</span><span class="cm"> * methods as well as provide additional methods and fields.
</span><span class="cm"> *
</span><span class="cm"> * @author  Jonathan Payne
</span><span class="cm"> * @since   JDK1.0
</span><span class="cm"> */</span>
<span class="kd">public</span>
<span class="kd">class</span> <span class="nc">FilterOutputStream</span> <span class="kd">extends</span> <span class="n">OutputStream</span>
</code></pre></td></tr></table>
</div>
</div><h4 id="缓冲流重点">缓冲流（重点）</h4>
<p>前面说了节点流，都是直接使用操作系统底层方法读取硬盘中的数据，缓冲流是处理流的一种实现，增强了节点流的性能，为了提高效率，缓冲流类在初始化对象的时候，内部有一个缓冲数组，一次性从底层流中读取数据到数组中，程序中执行read()或者read(byte[])的时候，就直接从内存数组中读取数据。</p>
<p>分类</p>
<ul>
<li>字节缓冲流：BufferedInputStream ， BufferedOutputStream</li>
<li>字符缓冲流：BufferedReader ， BufferedWriter</li>
</ul>
<h5 id="字节缓冲流">字节缓冲流</h5>
<p><code>java.io.BufferedInputStream</code> 定义如下</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java">
<span class="cm">/**
</span><span class="cm"> * A &lt;code&gt;BufferedInputStream&lt;/code&gt; adds
</span><span class="cm"> * functionality to another input stream-namely,
</span><span class="cm"> * the ability to buffer the input and to
</span><span class="cm"> * support the &lt;code&gt;mark&lt;/code&gt; and &lt;code&gt;reset&lt;/code&gt;
</span><span class="cm"> * methods. When  the &lt;code&gt;BufferedInputStream&lt;/code&gt;
</span><span class="cm"> * is created, an internal buffer array is
</span><span class="cm"> * created. As bytes  from the stream are read
</span><span class="cm"> * or skipped, the internal buffer is refilled
</span><span class="cm"> * as necessary  from the contained input stream,
</span><span class="cm"> * many bytes at a time. The &lt;code&gt;mark&lt;/code&gt;
</span><span class="cm"> * operation  remembers a point in the input
</span><span class="cm"> * stream and the &lt;code&gt;reset&lt;/code&gt; operation
</span><span class="cm"> * causes all the  bytes read since the most
</span><span class="cm"> * recent &lt;code&gt;mark&lt;/code&gt; operation to be
</span><span class="cm"> * reread before new bytes are  taken from
</span><span class="cm"> * the contained input stream.
</span><span class="cm"> *
</span><span class="cm"> * @author  Arthur van Hoff
</span><span class="cm"> * @since   JDK1.0
</span><span class="cm"> */</span>
<span class="kd">public</span>
<span class="kd">class</span> <span class="nc">BufferedInputStream</span> <span class="kd">extends</span> <span class="n">FilterInputStream</span>
</code></pre></td></tr></table>
</div>
</div><p>构造方法如下</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kd">private</span> <span class="kd">static</span> <span class="kt">int</span> <span class="n">DEFAULT_BUFFER_SIZE</span> <span class="o">=</span> <span class="n">8192</span><span class="o">;</span>

<span class="cm">/**
</span><span class="cm"> * Creates a &lt;code&gt;BufferedInputStream&lt;/code&gt;
</span><span class="cm"> * and saves its  argument, the input stream
</span><span class="cm"> * &lt;code&gt;in&lt;/code&gt;, for later use. An internal
</span><span class="cm"> * buffer array is created and  stored in &lt;code&gt;buf&lt;/code&gt;.
</span><span class="cm"> *
</span><span class="cm"> * @param   in   the underlying input stream.
</span><span class="cm"> */</span>
<span class="kd">public</span> <span class="nf">BufferedInputStream</span><span class="o">(</span><span class="n">InputStream</span> <span class="n">in</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">(</span><span class="n">in</span><span class="o">,</span> <span class="n">DEFAULT_BUFFER_SIZE</span><span class="o">);</span>
<span class="o">}</span>

<span class="cm">/**
</span><span class="cm"> * Creates a &lt;code&gt;BufferedInputStream&lt;/code&gt;
</span><span class="cm"> * with the specified buffer size,
</span><span class="cm"> * and saves its  argument, the input stream
</span><span class="cm"> * &lt;code&gt;in&lt;/code&gt;, for later use.  An internal
</span><span class="cm"> * buffer array of length  &lt;code&gt;size&lt;/code&gt;
</span><span class="cm"> * is created and stored in &lt;code&gt;buf&lt;/code&gt;.
</span><span class="cm"> *
</span><span class="cm"> * @param   in     the underlying input stream.
</span><span class="cm"> * @param   size   the buffer size.
</span><span class="cm"> * @exception IllegalArgumentException if {@code size &lt;= 0}.
</span><span class="cm"> */</span>
<span class="kd">public</span> <span class="nf">BufferedInputStream</span><span class="o">(</span><span class="n">InputStream</span> <span class="n">in</span><span class="o">,</span> <span class="kt">int</span> <span class="n">size</span><span class="o">)</span> <span class="o">{</span>
    <span class="kd">super</span><span class="o">(</span><span class="n">in</span><span class="o">);</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">size</span> <span class="o">&lt;=</span> <span class="n">0</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="n">IllegalArgumentException</span><span class="o">(</span><span class="s">&#34;Buffer size &lt;= 0&#34;</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="n">buf</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">byte</span><span class="o">[</span><span class="n">size</span><span class="o">];</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p>BufferedInputStream 内部默认 8192 = 8 * 1024 即 8M 的缓冲区</p>
<p><code>java.io.BufferedOutputStream</code> 定义如下</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="cm">/**
</span><span class="cm"> * The class implements a buffered output stream. By setting up such
</span><span class="cm"> * an output stream, an application can write bytes to the underlying
</span><span class="cm"> * output stream without necessarily causing a call to the underlying
</span><span class="cm"> * system for each byte written.
</span><span class="cm"> *
</span><span class="cm"> * @author  Arthur van Hoff
</span><span class="cm"> * @since   JDK1.0
</span><span class="cm"> */</span>
<span class="kd">public</span>
<span class="kd">class</span> <span class="nc">BufferedOutputStream</span> <span class="kd">extends</span> <span class="n">FilterOutputStream</span>
</code></pre></td></tr></table>
</div>
</div><p>构造方法如下</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="cm">/**
</span><span class="cm"> * Creates a new buffered output stream to write data to the
</span><span class="cm"> * specified underlying output stream.
</span><span class="cm"> *
</span><span class="cm"> * @param   out   the underlying output stream.
</span><span class="cm"> */</span>
<span class="kd">public</span> <span class="nf">BufferedOutputStream</span><span class="o">(</span><span class="n">OutputStream</span> <span class="n">out</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">(</span><span class="n">out</span><span class="o">,</span> <span class="n">8192</span><span class="o">);</span>
<span class="o">}</span>

<span class="cm">/**
</span><span class="cm"> * Creates a new buffered output stream to write data to the
</span><span class="cm"> * specified underlying output stream with the specified buffer
</span><span class="cm"> * size.
</span><span class="cm"> *
</span><span class="cm"> * @param   out    the underlying output stream.
</span><span class="cm"> * @param   size   the buffer size.
</span><span class="cm"> * @exception IllegalArgumentException if size &amp;lt;= 0.
</span><span class="cm"> */</span>
<span class="kd">public</span> <span class="nf">BufferedOutputStream</span><span class="o">(</span><span class="n">OutputStream</span> <span class="n">out</span><span class="o">,</span> <span class="kt">int</span> <span class="n">size</span><span class="o">)</span> <span class="o">{</span>
    <span class="kd">super</span><span class="o">(</span><span class="n">out</span><span class="o">);</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">size</span> <span class="o">&lt;=</span> <span class="n">0</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="n">IllegalArgumentException</span><span class="o">(</span><span class="s">&#34;Buffer size &lt;= 0&#34;</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="n">buf</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">byte</span><span class="o">[</span><span class="n">size</span><span class="o">];</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p>示例：使用基本流、缓冲流拷贝数据</p>
<p>示例中待拷贝的文件大小为：15.7 MB</p>
<p>代码如下</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span><span class="lnt">72
</span><span class="lnt">73
</span><span class="lnt">74
</span><span class="lnt">75
</span><span class="lnt">76
</span><span class="lnt">77
</span><span class="lnt">78
</span><span class="lnt">79
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">FileStreamCopyTest</span><span class="o">(){</span>
    <span class="kt">long</span> <span class="n">start</span> <span class="o">=</span> <span class="n">System</span><span class="o">.</span><span class="na">currentTimeMillis</span><span class="o">();</span>
    <span class="k">try</span><span class="o">(</span><span class="n">FileInputStream</span> <span class="n">fis</span> <span class="o">=</span> <span class="k">new</span> <span class="n">FileInputStream</span><span class="o">(</span><span class="s">&#34;D:\\LoveIt-0.2.10.zip&#34;</span><span class="o">);</span>
    <span class="n">FileOutputStream</span> <span class="n">fos</span> <span class="o">=</span> <span class="k">new</span> <span class="n">FileOutputStream</span><span class="o">(</span><span class="s">&#34;D:\\test.zip&#34;</span><span class="o">)){</span>
        <span class="c1">//使用基本流一次读取、写入一个字节
</span><span class="c1"></span>        <span class="kt">int</span> <span class="n">data</span><span class="o">;</span>
        <span class="k">while</span> <span class="o">((</span><span class="n">data</span> <span class="o">=</span> <span class="n">fis</span><span class="o">.</span><span class="na">read</span><span class="o">())</span> <span class="o">!=</span> <span class="o">-</span><span class="n">1</span><span class="o">){</span>
            <span class="n">fos</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">data</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">FileNotFoundException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">IOException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
    <span class="o">}</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">Thread</span><span class="o">.</span><span class="na">currentThread</span><span class="o">()</span> <span class="o">+</span> <span class="s">&#34;拷贝耗时：&#34;</span> <span class="o">+</span> <span class="o">(</span><span class="n">System</span><span class="o">.</span><span class="na">currentTimeMillis</span><span class="o">()</span> <span class="o">-</span> <span class="n">start</span><span class="o">));</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">FileStreamArrayCopyTest</span><span class="o">(){</span>
    <span class="kt">long</span> <span class="n">start</span> <span class="o">=</span> <span class="n">System</span><span class="o">.</span><span class="na">currentTimeMillis</span><span class="o">();</span>
    <span class="k">try</span><span class="o">(</span><span class="n">FileInputStream</span> <span class="n">fis</span> <span class="o">=</span> <span class="k">new</span> <span class="n">FileInputStream</span><span class="o">(</span><span class="s">&#34;D:\\LoveIt-0.2.10.zip&#34;</span><span class="o">);</span>
        <span class="n">FileOutputStream</span> <span class="n">fos</span> <span class="o">=</span> <span class="k">new</span> <span class="n">FileOutputStream</span><span class="o">(</span><span class="s">&#34;D:\\test1.zip&#34;</span><span class="o">)){</span>
        <span class="c1">//使用基本流一次读取、写入8M字节数组
</span><span class="c1"></span>        <span class="kt">int</span> <span class="n">len</span><span class="o">;</span>
        <span class="kt">byte</span><span class="o">[]</span> <span class="n">data</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">byte</span><span class="o">[</span><span class="n">1024</span> <span class="o">*</span> <span class="n">8</span><span class="o">];</span>
        <span class="k">while</span> <span class="o">((</span><span class="n">len</span> <span class="o">=</span> <span class="n">fis</span><span class="o">.</span><span class="na">read</span><span class="o">(</span><span class="n">data</span><span class="o">))</span> <span class="o">!=</span> <span class="o">-</span><span class="n">1</span><span class="o">){</span>
            <span class="n">fos</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">data</span><span class="o">,</span> <span class="n">0</span><span class="o">,</span> <span class="n">len</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">FileNotFoundException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">IOException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
    <span class="o">}</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">Thread</span><span class="o">.</span><span class="na">currentThread</span><span class="o">()</span> <span class="o">+</span> <span class="s">&#34;拷贝耗时：&#34;</span> <span class="o">+</span> <span class="o">(</span><span class="n">System</span><span class="o">.</span><span class="na">currentTimeMillis</span><span class="o">()</span> <span class="o">-</span> <span class="n">start</span><span class="o">));</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">BufferedStreamCopyTest</span><span class="o">(){</span>
    <span class="kt">long</span> <span class="n">start</span> <span class="o">=</span> <span class="n">System</span><span class="o">.</span><span class="na">currentTimeMillis</span><span class="o">();</span>
    <span class="k">try</span><span class="o">(</span><span class="n">FileInputStream</span> <span class="n">fis</span> <span class="o">=</span> <span class="k">new</span> <span class="n">FileInputStream</span><span class="o">(</span><span class="s">&#34;D:\\LoveIt-0.2.10.zip&#34;</span><span class="o">);</span>
        <span class="n">FileOutputStream</span> <span class="n">fos</span> <span class="o">=</span> <span class="k">new</span> <span class="n">FileOutputStream</span><span class="o">(</span><span class="s">&#34;D:\\test2.zip&#34;</span><span class="o">)){</span>
        <span class="c1">//使用缓冲流一次读取、写入1字节
</span><span class="c1"></span>        <span class="kt">int</span> <span class="n">data</span><span class="o">;</span>
        <span class="k">while</span> <span class="o">((</span><span class="n">data</span> <span class="o">=</span> <span class="n">fis</span><span class="o">.</span><span class="na">read</span><span class="o">())</span> <span class="o">!=</span> <span class="o">-</span><span class="n">1</span><span class="o">){</span>
            <span class="n">fos</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">data</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">FileNotFoundException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">IOException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
    <span class="o">}</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">Thread</span><span class="o">.</span><span class="na">currentThread</span><span class="o">()</span> <span class="o">+</span> <span class="s">&#34;拷贝耗时：&#34;</span> <span class="o">+</span> <span class="o">(</span><span class="n">System</span><span class="o">.</span><span class="na">currentTimeMillis</span><span class="o">()</span> <span class="o">-</span> <span class="n">start</span><span class="o">));</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">BufferedStreamArrayCopyTest</span><span class="o">(){</span>
    <span class="kt">long</span> <span class="n">start</span> <span class="o">=</span> <span class="n">System</span><span class="o">.</span><span class="na">currentTimeMillis</span><span class="o">();</span>
    <span class="k">try</span><span class="o">(</span><span class="n">FileInputStream</span> <span class="n">fis</span> <span class="o">=</span> <span class="k">new</span> <span class="n">FileInputStream</span><span class="o">(</span><span class="s">&#34;D:\\LoveIt-0.2.10.zip&#34;</span><span class="o">);</span>
        <span class="n">FileOutputStream</span> <span class="n">fos</span> <span class="o">=</span> <span class="k">new</span> <span class="n">FileOutputStream</span><span class="o">(</span><span class="s">&#34;D:\\test3.zip&#34;</span><span class="o">)){</span>
        <span class="c1">//使用缓冲流一次读取、写入8M字节数组
</span><span class="c1"></span>        <span class="kt">int</span> <span class="n">len</span><span class="o">;</span>
        <span class="kt">byte</span><span class="o">[]</span> <span class="n">data</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">byte</span><span class="o">[</span><span class="n">1024</span> <span class="o">*</span> <span class="n">8</span><span class="o">];</span>
        <span class="k">while</span> <span class="o">((</span><span class="n">len</span> <span class="o">=</span> <span class="n">fis</span><span class="o">.</span><span class="na">read</span><span class="o">(</span><span class="n">data</span><span class="o">))</span> <span class="o">!=</span> <span class="o">-</span><span class="n">1</span><span class="o">){</span>
            <span class="n">fos</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">data</span><span class="o">,</span> <span class="n">0</span><span class="o">,</span> <span class="n">len</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">FileNotFoundException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">IOException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
    <span class="o">}</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">Thread</span><span class="o">.</span><span class="na">currentThread</span><span class="o">()</span> <span class="o">+</span> <span class="s">&#34;拷贝耗时：&#34;</span> <span class="o">+</span> <span class="o">(</span><span class="n">System</span><span class="o">.</span><span class="na">currentTimeMillis</span><span class="o">()</span> <span class="o">-</span> <span class="n">start</span><span class="o">));</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">new</span> <span class="n">Thread</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="n">FileStreamCopyTest</span><span class="o">(),</span> <span class="s">&#34;基本流传输1字节&#34;</span><span class="o">).</span><span class="na">start</span><span class="o">();</span>

    <span class="k">new</span> <span class="n">Thread</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="n">FileStreamArrayCopyTest</span><span class="o">(),</span><span class="s">&#34;基本流传输8M字节&#34;</span><span class="o">).</span><span class="na">start</span><span class="o">();</span>

    <span class="k">new</span> <span class="n">Thread</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="n">BufferedStreamCopyTest</span><span class="o">(),</span><span class="s">&#34;缓冲流传输1字节&#34;</span><span class="o">).</span><span class="na">start</span><span class="o">();</span>

    <span class="k">new</span> <span class="n">Thread</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="n">BufferedStreamArrayCopyTest</span><span class="o">(),</span><span class="s">&#34;缓冲流传输8M字节&#34;</span><span class="o">).</span><span class="na">start</span><span class="o">();</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p>运行结果</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">Thread[缓冲流传输8M字节,5,main]拷贝耗时：211
Thread[基本流传输8M字节,5,main]拷贝耗时：212
Thread[基本流传输1字节,5,main]拷贝耗时：228992
Thread[缓冲流传输1字节,5,main]拷贝耗时：229842
</code></pre></td></tr></table>
</div>
</div><p>由上述示例可以得出结论：缓冲流比普通流要快</p>
<p>注意： 采用边读边写的方式，一次传输几兆的数据效率比较高，如果采用先把文件的数据都读入内存，在进行写出，这样读写的次数是较小，但是占用太大的内存空间，一次读太大的数据也严重影响效率!</p>
<h5 id="字符缓冲流">字符缓冲流</h5>
<p>字符缓冲流 <code>java.io.BufferedReader</code> 和 <code>java.io.BufferedWriter</code> 是对字符节点流的装饰，</p>
<p><code>java.io.BufferedReader</code> 的定义如下</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java">
<span class="cm">/**
</span><span class="cm"> * Reads text from a character-input stream, buffering characters so as to
</span><span class="cm"> * provide for the efficient reading of characters, arrays, and lines.
</span><span class="cm"> *
</span><span class="cm"> * &lt;p&gt; The buffer size may be specified, or the default size may be used.  The
</span><span class="cm"> * default is large enough for most purposes.
</span><span class="cm"> *
</span><span class="cm"> * &lt;p&gt; In general, each read request made of a Reader causes a corresponding
</span><span class="cm"> * read request to be made of the underlying character or byte stream.  It is
</span><span class="cm"> * therefore advisable to wrap a BufferedReader around any Reader whose read()
</span><span class="cm"> * operations may be costly, such as FileReaders and InputStreamReaders.  For
</span><span class="cm"> * example,
</span><span class="cm"> *
</span><span class="cm"> * &lt;pre&gt;
</span><span class="cm"> * BufferedReader in
</span><span class="cm"> *   = new BufferedReader(new FileReader(&#34;foo.in&#34;));
</span><span class="cm"> * &lt;/pre&gt;
</span><span class="cm"> *
</span><span class="cm"> * will buffer the input from the specified file.  Without buffering, each
</span><span class="cm"> * invocation of read() or readLine() could cause bytes to be read from the
</span><span class="cm"> * file, converted into characters, and then returned, which can be very
</span><span class="cm"> * inefficient.
</span><span class="cm"> *
</span><span class="cm"> * &lt;p&gt; Programs that use DataInputStreams for textual input can be localized by
</span><span class="cm"> * replacing each DataInputStream with an appropriate BufferedReader.
</span><span class="cm"> *
</span><span class="cm"> * @see FileReader
</span><span class="cm"> * @see InputStreamReader
</span><span class="cm"> * @see java.nio.file.Files#newBufferedReader
</span><span class="cm"> *
</span><span class="cm"> * @author      Mark Reinhold
</span><span class="cm"> * @since       JDK1.1
</span><span class="cm"> */</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">BufferedReader</span> <span class="kd">extends</span> <span class="n">Reader</span>
</code></pre></td></tr></table>
</div>
</div><p>构造方法ruxia</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kd">private</span> <span class="kd">static</span> <span class="kt">int</span> <span class="n">defaultCharBufferSize</span> <span class="o">=</span> <span class="n">8192</span><span class="o">;</span>


<span class="cm">/**
</span><span class="cm"> * Creates a buffering character-input stream that uses an input buffer of
</span><span class="cm"> * the specified size.
</span><span class="cm"> *
</span><span class="cm"> * @param  in   A Reader
</span><span class="cm"> * @param  sz   Input-buffer size
</span><span class="cm"> *
</span><span class="cm"> * @exception  IllegalArgumentException  If {@code sz &lt;= 0}
</span><span class="cm"> */</span>
<span class="kd">public</span> <span class="nf">BufferedReader</span><span class="o">(</span><span class="n">Reader</span> <span class="n">in</span><span class="o">,</span> <span class="kt">int</span> <span class="n">sz</span><span class="o">)</span> <span class="o">{</span>
    <span class="kd">super</span><span class="o">(</span><span class="n">in</span><span class="o">);</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">sz</span> <span class="o">&lt;=</span> <span class="n">0</span><span class="o">)</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="n">IllegalArgumentException</span><span class="o">(</span><span class="s">&#34;Buffer size &lt;= 0&#34;</span><span class="o">);</span>
    <span class="k">this</span><span class="o">.</span><span class="na">in</span> <span class="o">=</span> <span class="n">in</span><span class="o">;</span>
    <span class="n">cb</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">char</span><span class="o">[</span><span class="n">sz</span><span class="o">];</span>
    <span class="n">nextChar</span> <span class="o">=</span> <span class="n">nChars</span> <span class="o">=</span> <span class="n">0</span><span class="o">;</span>
<span class="o">}</span>

<span class="cm">/**
</span><span class="cm"> * Creates a buffering character-input stream that uses a default-sized
</span><span class="cm"> * input buffer.
</span><span class="cm"> *
</span><span class="cm"> * @param  in   A Reader
</span><span class="cm"> */</span>
<span class="kd">public</span> <span class="nf">BufferedReader</span><span class="o">(</span><span class="n">Reader</span> <span class="n">in</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">(</span><span class="n">in</span><span class="o">,</span> <span class="n">defaultCharBufferSize</span><span class="o">);</span>
<span class="o">}</span>

</code></pre></td></tr></table>
</div>
</div><p><code>java.io.BufferedWriter</code> 的定义如下</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="cm">/**
</span><span class="cm"> * Writes text to a character-output stream, buffering characters so as to
</span><span class="cm"> * provide for the efficient writing of single characters, arrays, and strings.
</span><span class="cm"> *
</span><span class="cm"> * &lt;p&gt; The buffer size may be specified, or the default size may be accepted.
</span><span class="cm"> * The default is large enough for most purposes.
</span><span class="cm"> *
</span><span class="cm"> * &lt;p&gt; A newLine() method is provided, which uses the platform&#39;s own notion of
</span><span class="cm"> * line separator as defined by the system property &lt;tt&gt;line.separator&lt;/tt&gt;.
</span><span class="cm"> * Not all platforms use the newline character (&#39;\n&#39;) to terminate lines.
</span><span class="cm"> * Calling this method to terminate each output line is therefore preferred to
</span><span class="cm"> * writing a newline character directly.
</span><span class="cm"> *
</span><span class="cm"> * &lt;p&gt; In general, a Writer sends its output immediately to the underlying
</span><span class="cm"> * character or byte stream.  Unless prompt output is required, it is advisable
</span><span class="cm"> * to wrap a BufferedWriter around any Writer whose write() operations may be
</span><span class="cm"> * costly, such as FileWriters and OutputStreamWriters.  For example,
</span><span class="cm"> *
</span><span class="cm"> * &lt;pre&gt;
</span><span class="cm"> * PrintWriter out
</span><span class="cm"> *   = new PrintWriter(new BufferedWriter(new FileWriter(&#34;foo.out&#34;)));
</span><span class="cm"> * &lt;/pre&gt;
</span><span class="cm"> *
</span><span class="cm"> * will buffer the PrintWriter&#39;s output to the file.  Without buffering, each
</span><span class="cm"> * invocation of a print() method would cause characters to be converted into
</span><span class="cm"> * bytes that would then be written immediately to the file, which can be very
</span><span class="cm"> * inefficient.
</span><span class="cm"> *
</span><span class="cm"> * @see PrintWriter
</span><span class="cm"> * @see FileWriter
</span><span class="cm"> * @see OutputStreamWriter
</span><span class="cm"> * @see java.nio.file.Files#newBufferedWriter
</span><span class="cm"> *
</span><span class="cm"> * @author      Mark Reinhold
</span><span class="cm"> * @since       JDK1.1
</span><span class="cm"> */</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">BufferedWriter</span> <span class="kd">extends</span> <span class="n">Writer</span>
</code></pre></td></tr></table>
</div>
</div><p>构造方法如下</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kd">private</span> <span class="kd">static</span> <span class="kt">int</span> <span class="n">defaultCharBufferSize</span> <span class="o">=</span> <span class="n">8192</span><span class="o">;</span>
<span class="cm">/**
</span><span class="cm"> * Creates a buffered character-output stream that uses a default-sized
</span><span class="cm"> * output buffer.
</span><span class="cm"> *
</span><span class="cm"> * @param  out  A Writer
</span><span class="cm"> */</span>
<span class="kd">public</span> <span class="nf">BufferedWriter</span><span class="o">(</span><span class="n">Writer</span> <span class="n">out</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">(</span><span class="n">out</span><span class="o">,</span> <span class="n">defaultCharBufferSize</span><span class="o">);</span>
<span class="o">}</span>

<span class="cm">/**
</span><span class="cm"> * Creates a new buffered character-output stream that uses an output
</span><span class="cm"> * buffer of the given size.
</span><span class="cm"> *
</span><span class="cm"> * @param  out  A Writer
</span><span class="cm"> * @param  sz   Output-buffer size, a positive integer
</span><span class="cm"> *
</span><span class="cm"> * @exception  IllegalArgumentException  If {@code sz &lt;= 0}
</span><span class="cm"> */</span>
<span class="kd">public</span> <span class="nf">BufferedWriter</span><span class="o">(</span><span class="n">Writer</span> <span class="n">out</span><span class="o">,</span> <span class="kt">int</span> <span class="n">sz</span><span class="o">)</span> <span class="o">{</span>
    <span class="kd">super</span><span class="o">(</span><span class="n">out</span><span class="o">);</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">sz</span> <span class="o">&lt;=</span> <span class="n">0</span><span class="o">)</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="n">IllegalArgumentException</span><span class="o">(</span><span class="s">&#34;Buffer size &lt;= 0&#34;</span><span class="o">);</span>
    <span class="k">this</span><span class="o">.</span><span class="na">out</span> <span class="o">=</span> <span class="n">out</span><span class="o">;</span>
    <span class="n">cb</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">char</span><span class="o">[</span><span class="n">sz</span><span class="o">];</span>
    <span class="n">nChars</span> <span class="o">=</span> <span class="n">sz</span><span class="o">;</span>
    <span class="n">nextChar</span> <span class="o">=</span> <span class="n">0</span><span class="o">;</span>

    <span class="n">lineSeparator</span> <span class="o">=</span> <span class="n">java</span><span class="o">.</span><span class="na">security</span><span class="o">.</span><span class="na">AccessController</span><span class="o">.</span><span class="na">doPrivileged</span><span class="o">(</span>
        <span class="k">new</span> <span class="n">sun</span><span class="o">.</span><span class="na">security</span><span class="o">.</span><span class="na">action</span><span class="o">.</span><span class="na">GetPropertyAction</span><span class="o">(</span><span class="s">&#34;line.separator&#34;</span><span class="o">));</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p>字符缓冲流的特有方法</p>
<table>
<thead>
<tr>
<th>类</th>
<th>方法名</th>
<th>方法说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>BufferedReader</td>
<td>String readLine() throws IOException</td>
<td>一行行读取，读取到最后一行返回null</td>
</tr>
<tr>
<td>BufferedWriter</td>
<td>void newLine() throws IOException</td>
<td>写一个换行符到文件中，实现换行</td>
</tr>
</tbody>
</table>
<p><code>java.io.BufferedReader#readLine()</code> 方法定义如下</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java">
<span class="cm">/**
</span><span class="cm"> * Reads a line of text.  A line is considered to be terminated by any one
</span><span class="cm"> * of a line feed (&#39;\n&#39;), a carriage return (&#39;\r&#39;), or a carriage return
</span><span class="cm"> * followed immediately by a linefeed.
</span><span class="cm"> *
</span><span class="cm"> * @return     A String containing the contents of the line, not including
</span><span class="cm"> *             any line-termination characters, or null if the end of the
</span><span class="cm"> *             stream has been reached
</span><span class="cm"> *
</span><span class="cm"> * @exception  IOException  If an I/O error occurs
</span><span class="cm"> *
</span><span class="cm"> * @see java.nio.file.Files#readAllLines
</span><span class="cm"> */</span>
<span class="kd">public</span> <span class="n">String</span> <span class="nf">readLine</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">readLine</span><span class="o">(</span><span class="kc">false</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p><code>java.io.BufferedWriter#newLine</code> 方法定义如下</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="cm">/**
</span><span class="cm"> * Writes a line separator.  The line separator string is defined by the
</span><span class="cm"> * system property &lt;tt&gt;line.separator&lt;/tt&gt;, and is not necessarily a single
</span><span class="cm"> * newline (&#39;\n&#39;) character.
</span><span class="cm"> *
</span><span class="cm"> * @exception  IOException  If an I/O error occurs
</span><span class="cm"> */</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">newLine</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="o">{</span>
    <span class="n">write</span><span class="o">(</span><span class="n">lineSeparator</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p>示例：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="k">try</span><span class="o">(</span><span class="n">BufferedReader</span> <span class="n">br</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BufferedReader</span><span class="o">(</span><span class="k">new</span> <span class="n">FileReader</span><span class="o">(</span><span class="s">&#34;D://三国//赵云.txt&#34;</span><span class="o">));</span>
    <span class="n">BufferedWriter</span> <span class="n">bw</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BufferedWriter</span><span class="o">(</span><span class="k">new</span> <span class="n">FileWriter</span><span class="o">(</span><span class="s">&#34;D://三国//赵子龙.txt&#34;</span><span class="o">))){</span>
    <span class="n">String</span> <span class="n">line</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
    <span class="k">while</span> <span class="o">((</span><span class="n">line</span> <span class="o">=</span> <span class="n">br</span><span class="o">.</span><span class="na">readLine</span><span class="o">())</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">){</span>
        <span class="n">bw</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">line</span><span class="o">);</span>
        <span class="n">bw</span><span class="o">.</span><span class="na">newLine</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">FileNotFoundException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">IOException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><h4 id="转换流">转换流</h4>
<h5 id="字符编码和字符集">字符编码和字符集</h5>
<p>字符编码</p>
<p>计算机存储的数据都是二进制的，而我们在电脑上看到的数字、英文、汉字等都是二进制转换的结果</p>
<ul>
<li>将字符转换成二进制，为编码</li>
<li>将二进制转换为字符，为解码</li>
</ul>
<p>​字符编码 就是 自然语言和二进制的对应规则</p>
<p>字符集</p>
<ul>
<li>就是一个编码表，常见的字符集有ASCII字符集、GBK字符集、Unicode字符集等，具体各个编码的介绍在这里就不介绍了。</li>
</ul>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/images/20210225-%e5%ad%97%e7%ac%a6%e9%9b%86.png"
        data-srcset="/images/20210225-%e5%ad%97%e7%ac%a6%e9%9b%86.png, /images/20210225-%e5%ad%97%e7%ac%a6%e9%9b%86.png 1.5x, /images/20210225-%e5%ad%97%e7%ac%a6%e9%9b%86.png 2x"
        data-sizes="auto"
        alt="/images/20210225-字符集.png"
        title="字符集" /></p>
<p>编码和解码时使用的字符集不一致，就可能出现乱码。</p>
<h5 id="inputstreamreader">InputStreamReader</h5>
<p>定义如下</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java">
<span class="cm">/**
</span><span class="cm"> * An InputStreamReader is a bridge from byte streams to character streams: It
</span><span class="cm"> * reads bytes and decodes them into characters using a specified {@link
</span><span class="cm"> * java.nio.charset.Charset charset}.  The charset that it uses
</span><span class="cm"> * may be specified by name or may be given explicitly, or the platform&#39;s
</span><span class="cm"> * default charset may be accepted.
</span><span class="cm"> *
</span><span class="cm"> * &lt;p&gt; Each invocation of one of an InputStreamReader&#39;s read() methods may
</span><span class="cm"> * cause one or more bytes to be read from the underlying byte-input stream.
</span><span class="cm"> * To enable the efficient conversion of bytes to characters, more bytes may
</span><span class="cm"> * be read ahead from the underlying stream than are necessary to satisfy the
</span><span class="cm"> * current read operation.
</span><span class="cm"> *
</span><span class="cm"> * &lt;p&gt; For top efficiency, consider wrapping an InputStreamReader within a
</span><span class="cm"> * BufferedReader.  For example:
</span><span class="cm"> *
</span><span class="cm"> * &lt;pre&gt;
</span><span class="cm"> * BufferedReader in
</span><span class="cm"> *   = new BufferedReader(new InputStreamReader(System.in));
</span><span class="cm"> * &lt;/pre&gt;
</span><span class="cm"> *
</span><span class="cm"> * @see BufferedReader
</span><span class="cm"> * @see InputStream
</span><span class="cm"> * @see java.nio.charset.Charset
</span><span class="cm"> *
</span><span class="cm"> * @author      Mark Reinhold
</span><span class="cm"> * @since       JDK1.1
</span><span class="cm"> */</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">InputStreamReader</span> <span class="kd">extends</span> <span class="n">Reader</span>
</code></pre></td></tr></table>
</div>
</div><p>InputStreamReader 是 Reader 的子类，读取字节，并使用指定的字符集将其解码为字符。字符集可以自己指定，也可以使用平台的默认字符集。</p>
<p>构造方法如下</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="cm">/**
</span><span class="cm"> * Creates an InputStreamReader that uses the default charset.
</span><span class="cm"> *
</span><span class="cm"> * @param  in   An InputStream
</span><span class="cm"> */</span>
<span class="kd">public</span> <span class="nf">InputStreamReader</span><span class="o">(</span><span class="n">InputStream</span> <span class="n">in</span><span class="o">)</span> <span class="o">{</span>
    <span class="kd">super</span><span class="o">(</span><span class="n">in</span><span class="o">);</span>
    <span class="k">try</span> <span class="o">{</span>
        <span class="n">sd</span> <span class="o">=</span> <span class="n">StreamDecoder</span><span class="o">.</span><span class="na">forInputStreamReader</span><span class="o">(</span><span class="n">in</span><span class="o">,</span> <span class="k">this</span><span class="o">,</span> <span class="o">(</span><span class="n">String</span><span class="o">)</span><span class="kc">null</span><span class="o">);</span> <span class="c1">// ## check lock object
</span><span class="c1"></span>    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">UnsupportedEncodingException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">// The default encoding should always be available
</span><span class="c1"></span>        <span class="k">throw</span> <span class="k">new</span> <span class="n">Error</span><span class="o">(</span><span class="n">e</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="cm">/**
</span><span class="cm"> * Creates an InputStreamReader that uses the named charset.
</span><span class="cm"> *
</span><span class="cm"> * @param  in
</span><span class="cm"> *         An InputStream
</span><span class="cm"> *
</span><span class="cm"> * @param  charsetName
</span><span class="cm"> *         The name of a supported
</span><span class="cm"> *         {@link java.nio.charset.Charset charset}
</span><span class="cm"> *
</span><span class="cm"> * @exception  UnsupportedEncodingException
</span><span class="cm"> *             If the named charset is not supported
</span><span class="cm"> */</span>
<span class="kd">public</span> <span class="nf">InputStreamReader</span><span class="o">(</span><span class="n">InputStream</span> <span class="n">in</span><span class="o">,</span> <span class="n">String</span> <span class="n">charsetName</span><span class="o">)</span>
    <span class="kd">throws</span> <span class="n">UnsupportedEncodingException</span>
<span class="o">{</span>
    <span class="kd">super</span><span class="o">(</span><span class="n">in</span><span class="o">);</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">charsetName</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="n">NullPointerException</span><span class="o">(</span><span class="s">&#34;charsetName&#34;</span><span class="o">);</span>
    <span class="n">sd</span> <span class="o">=</span> <span class="n">StreamDecoder</span><span class="o">.</span><span class="na">forInputStreamReader</span><span class="o">(</span><span class="n">in</span><span class="o">,</span> <span class="k">this</span><span class="o">,</span> <span class="n">charsetName</span><span class="o">);</span>
<span class="o">}</span>

<span class="cm">/**
</span><span class="cm"> * Creates an InputStreamReader that uses the given charset.
</span><span class="cm"> *
</span><span class="cm"> * @param  in       An InputStream
</span><span class="cm"> * @param  cs       A charset
</span><span class="cm"> *
</span><span class="cm"> * @since 1.4
</span><span class="cm"> * @spec JSR-51
</span><span class="cm"> */</span>
<span class="kd">public</span> <span class="nf">InputStreamReader</span><span class="o">(</span><span class="n">InputStream</span> <span class="n">in</span><span class="o">,</span> <span class="n">Charset</span> <span class="n">cs</span><span class="o">)</span> <span class="o">{</span>
    <span class="kd">super</span><span class="o">(</span><span class="n">in</span><span class="o">);</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">cs</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="n">NullPointerException</span><span class="o">(</span><span class="s">&#34;charset&#34;</span><span class="o">);</span>
    <span class="n">sd</span> <span class="o">=</span> <span class="n">StreamDecoder</span><span class="o">.</span><span class="na">forInputStreamReader</span><span class="o">(</span><span class="n">in</span><span class="o">,</span> <span class="k">this</span><span class="o">,</span> <span class="n">cs</span><span class="o">);</span>
<span class="o">}</span>

<span class="cm">/**
</span><span class="cm"> * Creates an InputStreamReader that uses the given charset decoder.
</span><span class="cm"> *
</span><span class="cm"> * @param  in       An InputStream
</span><span class="cm"> * @param  dec      A charset decoder
</span><span class="cm"> *
</span><span class="cm"> * @since 1.4
</span><span class="cm"> * @spec JSR-51
</span><span class="cm"> */</span>
<span class="kd">public</span> <span class="nf">InputStreamReader</span><span class="o">(</span><span class="n">InputStream</span> <span class="n">in</span><span class="o">,</span> <span class="n">CharsetDecoder</span> <span class="n">dec</span><span class="o">)</span> <span class="o">{</span>
    <span class="kd">super</span><span class="o">(</span><span class="n">in</span><span class="o">);</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">dec</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="n">NullPointerException</span><span class="o">(</span><span class="s">&#34;charset decoder&#34;</span><span class="o">);</span>
    <span class="n">sd</span> <span class="o">=</span> <span class="n">StreamDecoder</span><span class="o">.</span><span class="na">forInputStreamReader</span><span class="o">(</span><span class="n">in</span><span class="o">,</span> <span class="k">this</span><span class="o">,</span> <span class="n">dec</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p>示例：</p>
<p>读取 UTF-8 字符集文件中的字符 “你好” ，可以看到如果使用 GBK 编码读取，会出现乱码</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="k">try</span> <span class="o">(</span><span class="n">InputStreamReader</span> <span class="n">isr</span> <span class="o">=</span> <span class="k">new</span> <span class="n">InputStreamReader</span><span class="o">(</span><span class="k">new</span> <span class="n">FileInputStream</span><span class="o">(</span><span class="s">&#34;D:/三国/utf8.txt&#34;</span><span class="o">));</span> <span class="c1">//默认 utf8编码
</span><span class="c1"></span>     <span class="c1">//指定 gbk编码
</span><span class="c1"></span>     <span class="n">InputStreamReader</span> <span class="n">isr2</span> <span class="o">=</span> <span class="k">new</span> <span class="n">InputStreamReader</span><span class="o">(</span><span class="k">new</span> <span class="n">FileInputStream</span><span class="o">(</span><span class="s">&#34;D:/三国/utf8.txt&#34;</span><span class="o">),</span> <span class="s">&#34;gbk&#34;</span><span class="o">))</span> <span class="o">{</span>

    <span class="kt">int</span> <span class="n">read</span><span class="o">;</span>
    <span class="k">while</span> <span class="o">((</span><span class="n">read</span> <span class="o">=</span> <span class="n">isr</span><span class="o">.</span><span class="na">read</span><span class="o">())</span> <span class="o">!=</span> <span class="o">-</span><span class="n">1</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">((</span><span class="kt">char</span><span class="o">)</span> <span class="n">read</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="k">while</span> <span class="o">((</span><span class="n">read</span> <span class="o">=</span> <span class="n">isr2</span><span class="o">.</span><span class="na">read</span><span class="o">())</span> <span class="o">!=</span> <span class="o">-</span><span class="n">1</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">((</span><span class="kt">char</span><span class="o">)</span> <span class="n">read</span><span class="o">);</span> <span class="c1">//乱码
</span><span class="c1"></span>    <span class="o">}</span>
<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">UnsupportedEncodingException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">FileNotFoundException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">IOException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><h5 id="outputstreamwriter">OutputStreamWriter</h5>
<p><code>java.io.OutputStreamWriter</code> 是 Writer 的子类，使用指定的字符集将字符编码为字节。字符集可以自己指定，也可以使用平台的默认字符集。</p>
<p>定义如下</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="cm">/**
</span><span class="cm"> * An OutputStreamWriter is a bridge from character streams to byte streams:
</span><span class="cm"> * Characters written to it are encoded into bytes using a specified {@link
</span><span class="cm"> * java.nio.charset.Charset charset}.  The charset that it uses
</span><span class="cm"> * may be specified by name or may be given explicitly, or the platform&#39;s
</span><span class="cm"> * default charset may be accepted.
</span><span class="cm"> *
</span><span class="cm"> * &lt;p&gt; Each invocation of a write() method causes the encoding converter to be
</span><span class="cm"> * invoked on the given character(s).  The resulting bytes are accumulated in a
</span><span class="cm"> * buffer before being written to the underlying output stream.  The size of
</span><span class="cm"> * this buffer may be specified, but by default it is large enough for most
</span><span class="cm"> * purposes.  Note that the characters passed to the write() methods are not
</span><span class="cm"> * buffered.
</span><span class="cm"> *
</span><span class="cm"> * &lt;p&gt; For top efficiency, consider wrapping an OutputStreamWriter within a
</span><span class="cm"> * BufferedWriter so as to avoid frequent converter invocations.  For example:
</span><span class="cm"> *
</span><span class="cm"> * &lt;pre&gt;
</span><span class="cm"> * Writer out
</span><span class="cm"> *   = new BufferedWriter(new OutputStreamWriter(System.out));
</span><span class="cm"> * &lt;/pre&gt;
</span><span class="cm"> *
</span><span class="cm"> * &lt;p&gt; A &lt;i&gt;surrogate pair&lt;/i&gt; is a character represented by a sequence of two
</span><span class="cm"> * &lt;tt&gt;char&lt;/tt&gt; values: A &lt;i&gt;high&lt;/i&gt; surrogate in the range &#39;&amp;#92;uD800&#39; to
</span><span class="cm"> * &#39;&amp;#92;uDBFF&#39; followed by a &lt;i&gt;low&lt;/i&gt; surrogate in the range &#39;&amp;#92;uDC00&#39; to
</span><span class="cm"> * &#39;&amp;#92;uDFFF&#39;.
</span><span class="cm"> *
</span><span class="cm"> * &lt;p&gt; A &lt;i&gt;malformed surrogate element&lt;/i&gt; is a high surrogate that is not
</span><span class="cm"> * followed by a low surrogate or a low surrogate that is not preceded by a
</span><span class="cm"> * high surrogate.
</span><span class="cm"> *
</span><span class="cm"> * &lt;p&gt; This class always replaces malformed surrogate elements and unmappable
</span><span class="cm"> * character sequences with the charset&#39;s default &lt;i&gt;substitution sequence&lt;/i&gt;.
</span><span class="cm"> * The {@linkplain java.nio.charset.CharsetEncoder} class should be used when more
</span><span class="cm"> * control over the encoding process is required.
</span><span class="cm"> *
</span><span class="cm"> * @see BufferedWriter
</span><span class="cm"> * @see OutputStream
</span><span class="cm"> * @see java.nio.charset.Charset
</span><span class="cm"> *
</span><span class="cm"> * @author      Mark Reinhold
</span><span class="cm"> * @since       JDK1.1
</span><span class="cm"> */</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">OutputStreamWriter</span> <span class="kd">extends</span> <span class="n">Writer</span>
</code></pre></td></tr></table>
</div>
</div><p>构造方法如下</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span><span class="lnt">72
</span><span class="lnt">73
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="cm">/**
</span><span class="cm"> * Creates an OutputStreamWriter that uses the named charset.
</span><span class="cm"> *
</span><span class="cm"> * @param  out
</span><span class="cm"> *         An OutputStream
</span><span class="cm"> *
</span><span class="cm"> * @param  charsetName
</span><span class="cm"> *         The name of a supported
</span><span class="cm"> *         {@link java.nio.charset.Charset charset}
</span><span class="cm"> *
</span><span class="cm"> * @exception  UnsupportedEncodingException
</span><span class="cm"> *             If the named encoding is not supported
</span><span class="cm"> */</span>
<span class="kd">public</span> <span class="nf">OutputStreamWriter</span><span class="o">(</span><span class="n">OutputStream</span> <span class="n">out</span><span class="o">,</span> <span class="n">String</span> <span class="n">charsetName</span><span class="o">)</span>
    <span class="kd">throws</span> <span class="n">UnsupportedEncodingException</span>
<span class="o">{</span>
    <span class="kd">super</span><span class="o">(</span><span class="n">out</span><span class="o">);</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">charsetName</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="n">NullPointerException</span><span class="o">(</span><span class="s">&#34;charsetName&#34;</span><span class="o">);</span>
    <span class="n">se</span> <span class="o">=</span> <span class="n">StreamEncoder</span><span class="o">.</span><span class="na">forOutputStreamWriter</span><span class="o">(</span><span class="n">out</span><span class="o">,</span> <span class="k">this</span><span class="o">,</span> <span class="n">charsetName</span><span class="o">);</span>
<span class="o">}</span>

<span class="cm">/**
</span><span class="cm"> * Creates an OutputStreamWriter that uses the default character encoding.
</span><span class="cm"> *
</span><span class="cm"> * @param  out  An OutputStream
</span><span class="cm"> */</span>
<span class="kd">public</span> <span class="nf">OutputStreamWriter</span><span class="o">(</span><span class="n">OutputStream</span> <span class="n">out</span><span class="o">)</span> <span class="o">{</span>
    <span class="kd">super</span><span class="o">(</span><span class="n">out</span><span class="o">);</span>
    <span class="k">try</span> <span class="o">{</span>
        <span class="n">se</span> <span class="o">=</span> <span class="n">StreamEncoder</span><span class="o">.</span><span class="na">forOutputStreamWriter</span><span class="o">(</span><span class="n">out</span><span class="o">,</span> <span class="k">this</span><span class="o">,</span> <span class="o">(</span><span class="n">String</span><span class="o">)</span><span class="kc">null</span><span class="o">);</span>
    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">UnsupportedEncodingException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="n">Error</span><span class="o">(</span><span class="n">e</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="cm">/**
</span><span class="cm"> * Creates an OutputStreamWriter that uses the given charset.
</span><span class="cm"> *
</span><span class="cm"> * @param  out
</span><span class="cm"> *         An OutputStream
</span><span class="cm"> *
</span><span class="cm"> * @param  cs
</span><span class="cm"> *         A charset
</span><span class="cm"> *
</span><span class="cm"> * @since 1.4
</span><span class="cm"> * @spec JSR-51
</span><span class="cm"> */</span>
<span class="kd">public</span> <span class="nf">OutputStreamWriter</span><span class="o">(</span><span class="n">OutputStream</span> <span class="n">out</span><span class="o">,</span> <span class="n">Charset</span> <span class="n">cs</span><span class="o">)</span> <span class="o">{</span>
    <span class="kd">super</span><span class="o">(</span><span class="n">out</span><span class="o">);</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">cs</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="n">NullPointerException</span><span class="o">(</span><span class="s">&#34;charset&#34;</span><span class="o">);</span>
    <span class="n">se</span> <span class="o">=</span> <span class="n">StreamEncoder</span><span class="o">.</span><span class="na">forOutputStreamWriter</span><span class="o">(</span><span class="n">out</span><span class="o">,</span> <span class="k">this</span><span class="o">,</span> <span class="n">cs</span><span class="o">);</span>
<span class="o">}</span>

<span class="cm">/**
</span><span class="cm"> * Creates an OutputStreamWriter that uses the given charset encoder.
</span><span class="cm"> *
</span><span class="cm"> * @param  out
</span><span class="cm"> *         An OutputStream
</span><span class="cm"> *
</span><span class="cm"> * @param  enc
</span><span class="cm"> *         A charset encoder
</span><span class="cm"> *
</span><span class="cm"> * @since 1.4
</span><span class="cm"> * @spec JSR-51
</span><span class="cm"> */</span>
<span class="kd">public</span> <span class="nf">OutputStreamWriter</span><span class="o">(</span><span class="n">OutputStream</span> <span class="n">out</span><span class="o">,</span> <span class="n">CharsetEncoder</span> <span class="n">enc</span><span class="o">)</span> <span class="o">{</span>
    <span class="kd">super</span><span class="o">(</span><span class="n">out</span><span class="o">);</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">enc</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="n">NullPointerException</span><span class="o">(</span><span class="s">&#34;charset encoder&#34;</span><span class="o">);</span>
    <span class="n">se</span> <span class="o">=</span> <span class="n">StreamEncoder</span><span class="o">.</span><span class="na">forOutputStreamWriter</span><span class="o">(</span><span class="n">out</span><span class="o">,</span> <span class="k">this</span><span class="o">,</span> <span class="n">enc</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p>示例：将 “你好” 写入文件。写入后两个文件的字符集不一样，文件大小也不一样</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="k">try</span><span class="o">(</span><span class="n">OutputStreamWriter</span> <span class="n">osw1</span> <span class="o">=</span> <span class="k">new</span> <span class="n">OutputStreamWriter</span><span class="o">(</span><span class="k">new</span> <span class="n">FileOutputStream</span><span class="o">(</span><span class="s">&#34;D://nihao1.txt&#34;</span><span class="o">));</span>
    <span class="n">OutputStreamWriter</span> <span class="n">osw2</span> <span class="o">=</span> <span class="k">new</span> <span class="n">OutputStreamWriter</span><span class="o">(</span><span class="k">new</span> <span class="n">FileOutputStream</span><span class="o">(</span><span class="s">&#34;D://nihao2.txt&#34;</span><span class="o">),</span> <span class="s">&#34;gbk&#34;</span><span class="o">)</span>
<span class="o">){</span>
    <span class="n">osw1</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="s">&#34;你好&#34;</span><span class="o">);</span> <span class="c1">//utf8编码，占6个字节
</span><span class="c1"></span>    <span class="n">osw2</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="s">&#34;你好&#34;</span><span class="o">);</span> <span class="c1">//gbk编码，占4个字节
</span><span class="c1"></span><span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">UnsupportedEncodingException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">FileNotFoundException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">IOException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/images/20210225-%e8%bd%ac%e6%8d%a2%e6%b5%81.png"
        data-srcset="/images/20210225-%e8%bd%ac%e6%8d%a2%e6%b5%81.png, /images/20210225-%e8%bd%ac%e6%8d%a2%e6%b5%81.png 1.5x, /images/20210225-%e8%bd%ac%e6%8d%a2%e6%b5%81.png 2x"
        data-sizes="auto"
        alt="/images/20210225-转换流.png"
        title="转换流" /></p>
<h4 id="对象流">对象流</h4>
<h5 id="序列化">序列化</h5>
<p>jdk提供了对象序列化的方式，该序列化机制将对象转为二进制流，二进制流主要包括对象的数据、对象的类型、对象的属性。可以将java对象转为二进制流写入文件中。文件会持久保存了对象的信息。</p>
<p>同理，从文件中读出对象的信息为反序列化的过程</p>
<p>对象想序列化，满足的条件:</p>
<ul>
<li>该类必须实现 java.io.Serializable 接口， Serializable 是一个标记接口(没有任何抽象方法)，不实现此接口的类将不会使任何状态序列化或反序列化，会抛出 NotSerializableException 。</li>
<li>该类的所有属性必须是可序列化的，如果有一个属性不需要可序列化的，则该属性使用 transient 关键字修饰</li>
</ul>
<h5 id="objectoutputstream">ObjectOutputStream</h5>
<p>该类实现将对象序列化后写出到外部设备，如硬盘文件</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="nf">ObjectOutputStream</span><span class="o">(</span><span class="n">OutputStream</span> <span class="n">out</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">IOException</span><span class="o">{}</span>
</code></pre></td></tr></table>
</div>
</div><p>常用方法</p>
<ul>
<li><code>void writeObject(Object obj) throws IOException</code>: 将指定的对象写出</li>
</ul>
<p>示例</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kd">static</span> <span class="kd">class</span> <span class="nc">User</span> <span class="kd">implements</span> <span class="n">Serializable</span><span class="o">{</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">long</span> <span class="n">serialVersionUID</span> <span class="o">=</span> <span class="n">1L</span><span class="o">;</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">name</span><span class="o">;</span>
    <span class="kd">private</span> <span class="n">Integer</span> <span class="n">age</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">User</span><span class="o">(</span><span class="n">String</span> <span class="n">name</span><span class="o">,</span> <span class="n">Integer</span> <span class="n">age</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">age</span> <span class="o">=</span> <span class="n">age</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">String</span> <span class="nf">toString</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="s">&#34;User{&#34;</span> <span class="o">+</span>
                <span class="s">&#34;name=&#39;&#34;</span> <span class="o">+</span> <span class="n">name</span> <span class="o">+</span> <span class="sc">&#39;\&#39;&#39;</span> <span class="o">+</span>
                <span class="s">&#34;, age=&#34;</span> <span class="o">+</span> <span class="n">age</span> <span class="o">+</span>
                <span class="sc">&#39;}&#39;</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">User</span> <span class="n">user</span> <span class="o">=</span> <span class="k">new</span> <span class="n">User</span><span class="o">(</span><span class="s">&#34;小明&#34;</span><span class="o">,</span> <span class="n">20</span><span class="o">);</span>
    <span class="k">try</span><span class="o">(</span><span class="n">ObjectOutputStream</span> <span class="n">oos</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ObjectOutputStream</span><span class="o">(</span><span class="k">new</span> <span class="n">FileOutputStream</span><span class="o">(</span><span class="s">&#34;D://obj.txt&#34;</span><span class="o">));){</span>
        <span class="n">oos</span><span class="o">.</span><span class="na">writeObject</span><span class="o">(</span><span class="n">user</span><span class="o">);</span>
    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">FileNotFoundException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">IOException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p>注意：</p>
<ul>
<li>实现了Serializable的实体一定要加一个serialVersionUID变量。</li>
<li>serialVersionUID生成后不要改变，避免反序列化失败，改变后会抛出InvalidClassException异常</li>
</ul>
<h5 id="objectinputstream">ObjectInputStream</h5>
<p>该类将ObjectOutputStream写出的对象反序列化成java对象</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="nf">ObjectInputStream</span><span class="o">(</span><span class="n">InputStream</span> <span class="n">in</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">IOException</span> 
</code></pre></td></tr></table>
</div>
</div><p>常用方法</p>
<ul>
<li><code>Object readObject() throws IOException, ClassNotFoundException</code>: 读取对象</li>
</ul>
<p>示例</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="k">try</span><span class="o">(</span><span class="n">ObjectInputStream</span> <span class="n">ois</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ObjectInputStream</span><span class="o">(</span><span class="k">new</span> <span class="n">FileInputStream</span><span class="o">(</span><span class="s">&#34;D://obj.txt&#34;</span><span class="o">))){</span>
    <span class="n">User</span> <span class="n">user</span> <span class="o">=</span> <span class="o">(</span><span class="n">User</span><span class="o">)</span> <span class="n">ois</span><span class="o">.</span><span class="na">readObject</span><span class="o">();</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">user</span><span class="o">);</span>
<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">FileNotFoundException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">IOException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">ClassNotFoundException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><h5 id="对象与字节数组的转换">对象与字节数组的转换</h5>
<p>利用对象流和字节数组流结合 ，可以实现java对象和byte[]之间的互转</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="c1">// 将对象转为byte[]
</span><span class="c1"></span><span class="kd">public</span> <span class="kd">static</span> <span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="kt">byte</span><span class="o">[]</span> <span class="nf">t1</span><span class="o">(</span><span class="n">T</span> <span class="n">t</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">ByteArrayOutputStream</span> <span class="n">bos</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ByteArrayOutputStream</span><span class="o">();</span>
    <span class="n">ObjectOutputStream</span> <span class="n">oos</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ObjectOutputStream</span><span class="o">(</span><span class="n">bos</span><span class="o">);</span>
    <span class="n">oos</span><span class="o">.</span><span class="na">writeObject</span><span class="o">(</span><span class="n">t</span><span class="o">);</span>
    <span class="k">return</span> <span class="n">bos</span><span class="o">.</span><span class="na">toByteArray</span><span class="o">();</span>
<span class="o">}</span>
<span class="c1">// 将byte[]转为对象
</span><span class="c1"></span><span class="kd">public</span> <span class="kd">static</span> <span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="n">T</span> <span class="nf">t2</span><span class="o">(</span><span class="kt">byte</span><span class="o">[]</span> <span class="n">data</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">IOException</span><span class="o">,</span> <span class="n">ClassNotFoundException</span> <span class="o">{</span>
    <span class="n">ByteArrayInputStream</span> <span class="n">bos</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ByteArrayInputStream</span><span class="o">(</span><span class="n">data</span><span class="o">);</span>
    <span class="n">ObjectInputStream</span> <span class="n">oos</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ObjectInputStream</span><span class="o">(</span><span class="n">bos</span><span class="o">);</span>
    <span class="k">return</span> <span class="o">(</span><span class="n">T</span><span class="o">)</span> <span class="n">oos</span><span class="o">.</span><span class="na">readObject</span><span class="o">();</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><h4 id="管道流">管道流</h4>
<p>管道流主要用于两个线程间的通信，即一个线程通过管道流给另一个线程发数据</p>
<p>注意：线程的通信一般使用wait()/notify(),使用流也可以达到通信的效果，并且可以传递数据</p>
<ul>
<li>java.io.PipedInputStream 和 java.io.PipedOutputStream</li>
<li>java.io.PipedReader 和 java.io.PipedWriter</li>
</ul>
<p>使用字节流示例</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kd">class</span> <span class="nc">Sender</span> <span class="kd">implements</span> <span class="n">Runnable</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="n">PipedOutputStream</span> <span class="n">pos</span><span class="o">;</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">msg</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">Sender</span><span class="o">(</span><span class="n">String</span> <span class="n">msg</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">pos</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PipedOutputStream</span><span class="o">();</span>
        <span class="k">this</span><span class="o">.</span><span class="na">msg</span> <span class="o">=</span> <span class="n">msg</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">()</span> <span class="o">{</span>
       <span class="n">pos</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">msg</span><span class="o">.</span><span class="na">getBytes</span><span class="o">())</span><span class="err">；</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="n">PipedOutputStream</span> <span class="nf">getPos</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">pos</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="kd">class</span> <span class="nc">Receiver</span> <span class="kd">implements</span> <span class="n">Runnable</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="n">PipedInputStream</span> <span class="n">pis</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">Receiver</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">pis</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PipedInputStream</span><span class="o">();</span>
    <span class="o">}</span>


    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">()</span> <span class="o">{</span>
         <span class="kt">byte</span><span class="o">[]</span> <span class="n">data</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">byte</span><span class="o">[</span><span class="n">1024</span><span class="o">];</span>
            <span class="kt">int</span> <span class="n">len</span><span class="o">;</span>
            <span class="k">while</span> <span class="o">((</span><span class="n">len</span> <span class="o">=</span> <span class="n">pis</span><span class="o">.</span><span class="na">read</span><span class="o">(</span><span class="n">data</span><span class="o">))</span> <span class="o">!=</span> <span class="o">-</span><span class="n">1</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="k">new</span> <span class="n">String</span><span class="o">(</span><span class="n">data</span><span class="o">,</span> <span class="n">0</span><span class="o">,</span> <span class="n">len</span><span class="o">));</span>
            <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
    
<span class="n">Sender</span> <span class="n">sender</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Sender</span><span class="o">(</span><span class="s">&#34;hello&#34;</span><span class="o">);</span>
<span class="n">Receiver</span> <span class="n">receiver</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Receiver</span><span class="o">();</span>
<span class="n">receiver</span><span class="o">.</span><span class="na">getPis</span><span class="o">().</span><span class="na">connect</span><span class="o">(</span><span class="n">sender</span><span class="o">.</span><span class="na">getPos</span><span class="o">());</span>
<span class="k">new</span> <span class="n">Thread</span><span class="o">(</span><span class="n">sender</span><span class="o">).</span><span class="na">start</span><span class="o">();</span>
<span class="k">new</span> <span class="n">Thread</span><span class="o">(</span><span class="n">receiver</span><span class="o">).</span><span class="na">start</span><span class="o">();</span>
<span class="c1">// 控制台输出  hello
</span></code></pre></td></tr></table>
</div>
</div><h4 id="输入流与输出流">输入流与输出流</h4>
<p>System.in 和 System.out 代表了系统标准的输入、输出设备</p>
<p>默认输入设备是键盘，默认输出设备是控制台</p>
<p>可以使用System类的setIn，setOut方法对默认设备进行改变</p>
<p>我们开发中经常使用的输出到控制台上的内容的方法。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;a&#34;</span><span class="o">);</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">print</span><span class="o">(</span><span class="s">&#34;b&#34;</span><span class="o">);</span>
<span class="kd">class</span> <span class="nc">System</span><span class="o">{</span>
    <span class="kd">public</span> <span class="kd">final</span> <span class="kd">static</span> <span class="n">InputStream</span> <span class="n">in</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
    <span class="kd">public</span> <span class="kd">final</span> <span class="kd">static</span> <span class="n">PrintStream</span> <span class="n">out</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="o">}</span>
<span class="kd">public</span> <span class="nf">PrintStream</span><span class="o">(</span><span class="n">String</span> <span class="n">fileName</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">FileNotFoundException</span><span class="o">{}</span>
</code></pre></td></tr></table>
</div>
</div><h4 id="数据流">数据流</h4>
<p>主要方便读取Java基本类型以及String的数据,有DataInputStream 和 DataOutputStream两个实现类</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="n">DataOutputStream</span> <span class="n">dos</span> <span class="o">=</span> <span class="k">new</span> <span class="n">DataOutputStream</span><span class="o">(</span><span class="k">new</span> <span class="n">FileOutputStream</span><span class="o">(</span><span class="s">&#34;D:/三国/周瑜.txt&#34;</span><span class="o">));</span>
<span class="n">dos</span><span class="o">.</span><span class="na">writeUTF</span><span class="o">(</span><span class="s">&#34;周瑜&#34;</span><span class="o">);</span>
<span class="n">dos</span><span class="o">.</span><span class="na">writeBoolean</span><span class="o">(</span><span class="kc">false</span><span class="o">);</span>
<span class="n">dos</span><span class="o">.</span><span class="na">writeLong</span><span class="o">(</span><span class="n">1234567890L</span><span class="o">);</span>

<span class="n">DataInputStream</span> <span class="n">dis</span> <span class="o">=</span> <span class="k">new</span> <span class="n">DataInputStream</span><span class="o">(</span><span class="k">new</span> <span class="n">FileInputStream</span><span class="o">(</span><span class="s">&#34;D:/三国/周瑜.txt&#34;</span><span class="o">));</span>
<span class="n">String</span> <span class="n">s</span> <span class="o">=</span> <span class="n">dis</span><span class="o">.</span><span class="na">readUTF</span><span class="o">();</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">s</span><span class="o">);</span>
<span class="kt">boolean</span> <span class="n">b</span> <span class="o">=</span> <span class="n">dis</span><span class="o">.</span><span class="na">readBoolean</span><span class="o">();</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">b</span><span class="o">);</span>
<span class="c1">// 输出
</span><span class="c1"></span><span class="n">周瑜</span>
<span class="kc">false</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="io-流总结">IO 流总结</h2>
<p>字节流</p>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/images/20210225-%e5%ad%97%e8%8a%82%e6%b5%81.png"
        data-srcset="/images/20210225-%e5%ad%97%e8%8a%82%e6%b5%81.png, /images/20210225-%e5%ad%97%e8%8a%82%e6%b5%81.png 1.5x, /images/20210225-%e5%ad%97%e8%8a%82%e6%b5%81.png 2x"
        data-sizes="auto"
        alt="/images/20210225-字节流.png"
        title="字节流" /></p>
<p>字节流</p>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/images/20210225-%e5%ad%97%e7%ac%a6%e6%b5%81.png"
        data-srcset="/images/20210225-%e5%ad%97%e7%ac%a6%e6%b5%81.png, /images/20210225-%e5%ad%97%e7%ac%a6%e6%b5%81.png 1.5x, /images/20210225-%e5%ad%97%e7%ac%a6%e6%b5%81.png 2x"
        data-sizes="auto"
        alt="/images/20210225-字符流.png"
        title="字符流" /></p>
<p>按功能划分</p>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/images/20210225-io%e6%b5%81.png"
        data-srcset="/images/20210225-io%e6%b5%81.png, /images/20210225-io%e6%b5%81.png 1.5x, /images/20210225-io%e6%b5%81.png 2x"
        data-sizes="auto"
        alt="/images/20210225-io流.png"
        title="io流" /></p>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/images/20210225-%e8%be%93%e5%85%a5%e8%be%93%e5%87%ba.png"
        data-srcset="/images/20210225-%e8%be%93%e5%85%a5%e8%be%93%e5%87%ba.png, /images/20210225-%e8%be%93%e5%85%a5%e8%be%93%e5%87%ba.png 1.5x, /images/20210225-%e8%be%93%e5%85%a5%e8%be%93%e5%87%ba.png 2x"
        data-sizes="auto"
        alt="/images/20210225-输入输出.png"
        title="输入输出" /></p>
</div><div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
                <span>更新于 2021-02-24</span>
            </div>
            <div class="post-info-license"></div>
        </div>
        <div class="post-info-line">
            <div class="post-info-md"><span>
                            <a class="link-to-markdown" href="/posts/java/%E9%97%AE%E9%A2%98%E6%B1%87%E6%80%BB/%E6%A2%B3%E7%90%86javaio%E6%B5%81/index.md" target="_blank">阅读原始文档</a>
                        </span></div>
            <div class="post-info-share">
                <span><a href="javascript:void(0);" title="分享到 Twitter" data-sharer="twitter" data-url="https://msdemt.github.io/posts/java/%E9%97%AE%E9%A2%98%E6%B1%87%E6%80%BB/%E6%A2%B3%E7%90%86javaio%E6%B5%81/" data-title="梳理Java IO流"><i class="fab fa-twitter fa-fw"></i></a><a href="javascript:void(0);" title="分享到 Facebook" data-sharer="facebook" data-url="https://msdemt.github.io/posts/java/%E9%97%AE%E9%A2%98%E6%B1%87%E6%80%BB/%E6%A2%B3%E7%90%86javaio%E6%B5%81/"><i class="fab fa-facebook-square fa-fw"></i></a><a href="javascript:void(0);" title="分享到 Hacker News" data-sharer="hackernews" data-url="https://msdemt.github.io/posts/java/%E9%97%AE%E9%A2%98%E6%B1%87%E6%80%BB/%E6%A2%B3%E7%90%86javaio%E6%B5%81/" data-title="梳理Java IO流"><i class="fab fa-hacker-news fa-fw"></i></a><a href="javascript:void(0);" title="分享到 Line" data-sharer="line" data-url="https://msdemt.github.io/posts/java/%E9%97%AE%E9%A2%98%E6%B1%87%E6%80%BB/%E6%A2%B3%E7%90%86javaio%E6%B5%81/" data-title="梳理Java IO流"><i data-svg-src="https://cdn.jsdelivr.net/npm/simple-icons@2.14.0/icons/line.svg"></i></a><a href="javascript:void(0);" title="分享到 微博" data-sharer="weibo" data-url="https://msdemt.github.io/posts/java/%E9%97%AE%E9%A2%98%E6%B1%87%E6%80%BB/%E6%A2%B3%E7%90%86javaio%E6%B5%81/" data-title="梳理Java IO流" data-ralateuid="xxxx"><i class="fab fa-weibo fa-fw"></i></a></span>
            </div>
        </div>
    </div>

    <div class="post-info-more">
        <section class="post-tags"></section>
        <section>
            <span><a href="javascript:void(0);" onclick="window.history.back();">返回</a></span>&nbsp;|&nbsp;<span><a href="/">主页</a></span>
        </section>
    </div>

    <div class="post-nav"><a href="/posts/java/%E9%97%AE%E9%A2%98%E6%B1%87%E6%80%BB/%E4%B8%87%E5%AD%97%E5%9B%BE%E8%A7%A3java%E5%A4%9A%E7%BA%BF%E7%A8%8B/" class="prev" rel="prev" title="万字图解Java多线程"><i class="fas fa-angle-left fa-fw"></i>万字图解Java多线程</a></div>
</div>
</article></div>
            </main><footer class="footer">
        <div class="footer-container"><div class="footer-line">由 <a href="https://gohugo.io/" target="_blank" rel="noopener noreffer" title="Hugo 0.80.0">Hugo</a> 强力驱动 | 主题 - <a href="https://github.com/dillonzq/LoveIt" target="_blank" rel="noopener noreffer" title="LoveIt 0.2.10"><i class="far fa-kiss-wink-heart fa-fw"></i> LoveIt</a>
                </div><div class="footer-line"><i class="far fa-copyright fa-fw"></i><span itemprop="copyrightYear">2019 - 2021</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="/" target="_blank">hekai</a></span>&nbsp;|&nbsp;<span class="license"><a rel="license external nofollow noopener noreffer" href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank">CC BY-NC 4.0</a></span></div>
        </div>
    </footer></div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="回到顶部">
                <i class="fas fa-arrow-up fa-fw"></i>
            </a><a href="#" id="view-comments" class="fixed-button" title="查看评论">
                <i class="fas fa-comment fa-fw"></i>
            </a>
        </div><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/smooth-scroll@16.1.3/dist/smooth-scroll.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/autocomplete.js@0.37.1/dist/autocomplete.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/algoliasearch@4.2.0/dist/algoliasearch-lite.umd.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lazysizes@5.2.2/lazysizes.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/clipboard@2.0.6/dist/clipboard.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/sharer.js@0.4.0/sharer.min.js"></script><script type="text/javascript">window.config={"code":{"copyTitle":"复制到剪贴板","maxShownLines":10},"comment":{},"search":{"algoliaAppID":"PASDMWALPK","algoliaIndex":"index.zh-cn","algoliaSearchKey":"b42948e51daaa93df92381c8e2ac0f93","highlightTag":"em","maxResultLength":10,"noResultsFound":"没有找到结果","snippetLength":50,"type":"algolia"}};</script><script type="text/javascript" src="/js/theme.min.js"></script></body>
</html>
